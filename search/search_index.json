{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Acceuil","text":"<p>Le site est heberg\u00e9 directement sur Github</p> <p> </p> <p>On peut faire des modifications en live en \u00e9ditant le projet associ\u00e9 gr\u00e2ce aux icones .</p>"},{"location":"#bienvenue-dans-mon-bordel-scolaire","title":"Bienvenue dans mon bordel scolaire","text":""},{"location":"#intro","title":"Intro","text":"<p>Salut,</p> <p>J'ai pour tradition de mettre en ligne tout ce que j'\u00e9cris en cours. Ceci inclut mes comptes-rendus mais aussi notes, astuces etc.</p> <p>C'est a prendre avec d'\u00e9normes pincettes, mais ca peut toujours servir si t'es plus perch\u00e9 ou en retard que moi.</p> <p>Si t'a un doute ou une correction, tu peux m'\u00e9crire et visiter mon GitHub avec les boutons en bas \u00e0 droite de la page. plus on est \u00e0 contribuer, plus ce sera complet et pr\u00e9cis!</p>"},{"location":"#organisation","title":"Organisation","text":"<p>J'ai fait une page par mati\u00e8re s\u00e9par\u00e9es entre le CFA et l'universit\u00e9, ainsi qu'une page de misc pour tout ce que je n'ai pas pu trier.</p> <p>H\u00e9site pas \u00e0 te servir de la barre de recherche, elle est performante.</p> <p>Bonne gal\u00e8re </p>"},{"location":"misc/","title":"Misc","text":"<p>MAJ le 14/09/2022 \u00e0 20h</p>"},{"location":"misc/#page-misc","title":"Page misc","text":"<p>Tu trouveras ici toutes les informations que je n'ai pas pu cat\u00e9goriser. Elles n'ont pas d'ordre particulier et ont le meilleur titre que j'ai pu trouver. Le meilleur moyen de trouver ce que tu cherches est probablement la barre de recherche.</p>"},{"location":"misc/#iptables","title":"Iptables","text":"Principe <p>Iptables est un utilitaire qui permet de filtrer les paquets. Il est principalement utilis\u00e9 comme firewall.</p> <p>Cet utilitaire est obsol\u00e8te.</p> <p>Tout le monde est pass\u00e9 sur <code>nftables</code>, sauf le prof.</p> <p>Quand un paquet est contr\u00f4l\u00e9, il est d'abord plac\u00e9 dans une des chaines INPUT, OUTPUT ou FORWARD en fonction de sa provenance et de sa destination.</p> <p>Pour chaque chaine, on peut placer des tests qui vont s'appliquer aux paquets. On peut d\u00e9cider quoi faire avec le paquet en fonction du r\u00e9sultat du test. Les tests sont ex\u00e9cut\u00e9s dans l'ordre d'apparition dans la chaine jusqu'\u00e0 ce qu'une d\u00e9cision soit prise vis-\u00e0-vis du paquet.</p> <p>On peut aussi cr\u00e9er d'autres chaines pour garder la configuration propre.</p> Arguments <p>Voici une petite liste d'arguments pour les r\u00e8gles:</p> Argument Description Exemple <code>-A</code> \"Append\" soit \"ajouter \u00e0 la fin de\". <code>iptables -A INPUT -J ACCEPT</code> <code>-I</code> \"Insert\" soit \"ins\u00e9rer [au d\u00e9but]\". <code>iptables -I INPUT -s frolov.eu -J ACCEPT</code> <code>-J</code> \"Jump\". Permet \"d'envoyer\" le paquet vers une d\u00e9cision: ACCEPT, DROP, RETURN ou LOG (y'en \u00e0 d'autres mais osef) ou vers une autre chaine <code>iptables -A INPUT -J ACCEPT</code> <code>-p</code> \"protocole\". tcp/udp/icmp/all <code>iptables -A INPUT -p udp -J DROP</code> <code>-dport</code> \"destination port\". Filtre en fonction du port cible <code>iptables -A INPUT -dport ssh -J DROP</code> <code>-s</code> \"source\", soit d'o\u00f9 vient le paquet <code>iptables -A INPUT -s frolov.eu -J ACCEPT</code> <code>-d</code> \"destination\", soit o\u00f9 va le paquet <code>iptables -A INPUT -d !localhost -J LOG</code> <p>Arguments de gestion:</p> Argument Description <code>-L</code> Lister <code>-F</code> Flush <code>-N</code> Cr\u00e9er une nouvelle chaine Modules <ul> <li><code>owner</code>: permet de v\u00e9rifier l'utilisateur qui envoie le paquet.<ul> <li>Utilisation: <code>-m owner --uid-owner [utilisateur]</code></li> </ul> </li> <li><code>limit</code>: permet de changer la valeur d'un test en fonction de la quantit\u00e9 de paquets re\u00e7us par unit\u00e9 de temps.<ul> <li>Utilisation: <code>-m limit --limit n/[unit\u00e9]</code> o\u00f9 [unit\u00e9] peut \u00eatre <code>s</code>, <code>m</code>, <code>h</code> etc.</li> </ul> </li> <li><code>state</code>: permet de v\u00e9rifier l'\u00e9tat de la connexion dont proovient le paquet.<ul> <li>Utilisation: <code>-m state --state NEW/ESTABLISHED/RELATED/INVALID</code></li> </ul> </li> </ul>"},{"location":"misc/#contenu-vraiment-aleatoire","title":"Contenu vraiment al\u00e9atoire","text":"Pour ne pas gal\u00e9rer avec GCC et VSCode <p>Aller ici</p> Arr\u00eater une recherche DNS sauvage <ul> <li>Ctrl+Shift+9 pour arr\u00eater la recherche sauvage,</li> <li><code>conf t &gt; no IP domain-lookup</code> pour pr\u00e9venir les recherches futures.</li> </ul> Adresse manuelle remplac\u00e9e par APIPA sous Windows <p>Quand on d\u00e9finit une IP manuelle pour sa carte ethernet sous Windows,  il est possible que l'IP choisie soit consid\u00e9r\u00e9e comme \"secondaire\", et que la vraie adresse de la carte soit APIPA.</p> <p>Dans ce cas, il semblerait que d\u00e9sinstaller puis r\u00e9installer la carte ethernet concern\u00e9e r\u00e8gle le probl\u00e8me.</p> <p>Cel\u00e0 dit, ca ne fonctionne pas toujours et je n'ai pas encore trouv\u00e9 d'informations fiables sur ce sujet.</p> <p>Mes <code>.bashrc</code></p> <p>Avantage de mes <code>.bashrc</code> par rapport \u00e0 ceux par d\u00e9faut:</p> <ul> <li> Prompt color\u00e9 qui rappelle le niveau de privil\u00e8ges,</li> <li> Des alias pratiques comme \"ll\" pour <code>ls -l</code> et \"la\" pour <code>ls -l -a</code>.</li> </ul> <code>.bashrc</code> utilisateur /home/[utilisateur]/.bashrc<pre><code># ~/.bashrc: executed by bash for non-login shells.\n# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)\n# for examples\n\n# If not running interactively, don't do anything\ncase $- in\n    *i*) ;;\n    *) return;;\nesac\n\n# don't put duplicate lines or lines starting with space in the history.\n# See bash for more options\nHISTCONTROL=ignoreboth\n\n# append to the history file, don't overwrite it\nshopt -s histappend\n\n# for setting history length see HISTSIZE and HISTFILESIZE in bash\nHISTSIZE=1000\nHISTFILESIZE=2000\n\n# check the window size after each command and, if necessary,\n# update the values of LINES and COLUMNS.\nshopt -s checkwinsize\n\n# If set, the pattern \"**\" used in a pathname expansion context will\n# match all files and zero or more directories and subdirectories.\n#shopt -s globstar\n\n# make less more friendly for non-text input files, see lesspipe\n#[ -x /usr/bin/lesspipe ] &amp;&amp; eval \"$(SHELL=/bin/sh lesspipe)\"\n\n# set variable identifying the chroot you work in (used in the prompt below)\nif [ -z \"${debian_chroot:-}\" ] &amp;&amp; [ -r /etc/debian_chroot ]; then\n    debian_chroot=$(cat /etc/debian_chroot)\nfi\n\n# set a fancy prompt (non-color, unless we know we \"want\" color)\ncase \"$TERM\" in\n    xterm-color|*-256color) color_prompt=yes;;\nesac\n\n# uncomment for a colored prompt, if the terminal has the capability; turned\n# off by default to not distract the user: the focus in a terminal window\n# should be on the output of commands, not on the prompt\nforce_color_prompt=yes\n\nif [ -n \"$force_color_prompt\" ]; then\n    if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then\n        # We have color support; assume it's compliant with Ecma-48\n        # (ISO/IEC-6429). (Lack of such support is extremely rare, and such\n        # a case would tend to support setf rather than setaf.)\n        color_prompt=yes\n    else\n        color_prompt=\n    fi\nfi\n\nif [ \"$color_prompt\" = yes ]; then\n    PS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ '\n    #\nelse\n    PS1='${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ '\nfi\nunset color_prompt force_color_prompt\n\n# If this is an xterm set the title to user@host:dir\ncase \"$TERM\" in\nxterm*|rxvt*)\n    PS1=\"\\[\\e]0;${debian_chroot:+($debian_chroot)}\\u@\\h: \\w\\a\\]$PS1\"\n    ;;\n*)\n    ;;\nesac\n\n# enable color support of ls and also add handy aliases\nif [ -x /usr/bin/dircolors ]; then\n    test -r ~/.dircolors &amp;&amp; eval \"$(dircolors -b ~/.dircolors)\" || eval \"$(dircolors -b)\"\n    alias ls='ls --color=auto'\n    alias dir='dir --color=auto'\n    alias vdir='vdir --color=auto'\n\n    alias grep='grep --color=auto'\n    alias fgrep='fgrep --color=auto'\n    alias egrep='egrep --color=auto'\nfi\n\n# colored GCC warnings and errors\nexport GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'\n\n# some more ls aliases\nalias ll='ls -l'\nalias la='ls -l -A'\n#alias l='ls -CF'\n\n# Alias definitions.\n# You may want to put all your additions into a separate file like\n# ~/.bash_aliases, instead of adding them here directly.\n# See /usr/share/doc/bash-doc/examples in the bash-doc package.\n\nif [ -f ~/.bash_aliases ]; then\n    . ~/.bash_aliases\nfi\n\n# enable programmable completion features (you don't need to enable\n# this, if it's already enabled in /etc/bash.bashrc and /etc/profile\n# sources /etc/bash.bashrc).\nif ! shopt -oq posix; then\nif [ -f /usr/share/bash-completion/bash_completion ]; then\n    . /usr/share/bash-completion/bash_completion\nelif [ -f /etc/bash_completion ]; then\n    . /etc/bash_completion\nfi\nfi\n</code></pre> <code>.bashrc</code> root /root/.bashrc<pre><code># ~/.bashrc: executed by bash for non-login shells.\n# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)\n# for examples\n\n# If not running interactively, don't do anything\ncase $- in\n    *i*) ;;\n    *) return;;\nesac\n\n# don't put duplicate lines or lines starting with space in the history.\n# See bash for more options\nHISTCONTROL=ignoreboth\n\n# append to the history file, don't overwrite it\nshopt -s histappend\n\n# for setting history length see HISTSIZE and HISTFILESIZE in bash\nHISTSIZE=1000\nHISTFILESIZE=2000\n\n# check the window size after each command and, if necessary,\n# update the values of LINES and COLUMNS.\nshopt -s checkwinsize\n\n# If set, the pattern \"**\" used in a pathname expansion context will\n# match all files and zero or more directories and subdirectories.\n#shopt -s globstar\n\n# make less more friendly for non-text input files, see lesspipe\n#[ -x /usr/bin/lesspipe ] &amp;&amp; eval \"$(SHELL=/bin/sh lesspipe)\"\n\n# set variable identifying the chroot you work in (used in the prompt below)\nif [ -z \"${debian_chroot:-}\" ] &amp;&amp; [ -r /etc/debian_chroot ]; then\n    debian_chroot=$(cat /etc/debian_chroot)\nfi\n\n# set a fancy prompt (non-color, unless we know we \"want\" color)\ncase \"$TERM\" in\n    xterm-color|*-256color) color_prompt=yes;;\nesac\n\n# uncomment for a colored prompt, if the terminal has the capability; turned\n# off by default to not distract the user: the focus in a terminal window\n# should be on the output of commands, not on the prompt\nforce_color_prompt=yes\n\nif [ -n \"$force_color_prompt\" ]; then\n    if [ -x /usr/bin/tput ] &amp;&amp; tput setaf 1 &gt;&amp;/dev/null; then\n        # We have color support; assume it's compliant with Ecma-48\n        # (ISO/IEC-6429). (Lack of such support is extremely rare, and such\n        # a case would tend to support setf rather than setaf.)\n        color_prompt=yes\n    else\n        color_prompt=\n    fi\nfi\n\nif [ \"$color_prompt\" = yes ]; then\n    PS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;31m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ '\n    #\nelse\n    PS1='${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ '\nfi\nunset color_prompt force_color_prompt\n\n# If this is an xterm set the title to user@host:dir\ncase \"$TERM\" in\nxterm*|rxvt*)\n    PS1=\"\\[\\e]0;${debian_chroot:+($debian_chroot)}\\u@\\h: \\w\\a\\]$PS1\"\n    ;;\n*)\n    ;;\nesac\n\n# enable color support of ls and also add handy aliases\nif [ -x /usr/bin/dircolors ]; then\n    test -r ~/.dircolors &amp;&amp; eval \"$(dircolors -b ~/.dircolors)\" || eval \"$(dircolors -b)\"\n    alias ls='ls --color=auto'\n    alias dir='dir --color=auto'\n    alias vdir='vdir --color=auto'\n\n    alias grep='grep --color=auto'\n    alias fgrep='fgrep --color=auto'\n    alias egrep='egrep --color=auto'\nfi\n\n# colored GCC warnings and errors\nexport GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'\n\n# some more ls aliases\nalias ll='ls -l'\nalias la='ls -l -A'\n#alias l='ls -CF'\n\n# Alias definitions.\n# You may want to put all your additions into a separate file like\n# ~/.bash_aliases, instead of adding them here directly.\n# See /usr/share/doc/bash-doc/examples in the bash-doc package.\n\nif [ -f ~/.bash_aliases ]; then\n    . ~/.bash_aliases\nfi\n\n# enable programmable completion features (you don't need to enable\n# this, if it's already enabled in /etc/bash.bashrc and /etc/profile\n# sources /etc/bash.bashrc).\nif ! shopt -oq posix; then\nif [ -f /usr/share/bash-completion/bash_completion ]; then\n    . /usr/share/bash-completion/bash_completion\nelif [ -f /etc/bash_completion ]; then\n    . /etc/bash_completion\nfi\nfi\n</code></pre>"},{"location":"cfa/","title":"CCNA 2","text":"<p>L'objectif de cette page est de reprendre les informations du cours Cisco qui semblent importantes.</p> <p>J'ajouterai des anotations personelles l\u00e0 o\u00f9 n\u00e9cessaire.</p> <p>Cette partie reprend les titres et l'arborescence du cours, mais les chapitres inint\u00e9ressants n'apparaissent pas.</p>"},{"location":"cfa/1/","title":"1 - Configuration de base des p\u00e9riph\u00e9riques","text":""},{"location":"cfa/1/#111-sequence-de-demarrage-du-commutateur","title":"1.1.1 - S\u00e9quence de d\u00e9marrage du commutateur","text":"<ul> <li>\u00c9tape 1: Tout d'abord, le commutateur charge un programme auto-test de mise sous tension (POST) stock\u00e9 dans la ROM. POST v\u00e9rifie le sous-syst\u00e8me CPU. Il teste le processeur, la DRAM et la partie du p\u00e9riph\u00e9rique flash qui constitue le syst\u00e8me de fichiers flash.</li> <li>\u00c9tape 2: Le commutateur ex\u00e9cute ensuite le bootloader. Le chargeur de d\u00e9marrage (boot loader) est un petit programme stock\u00e9 dans la ROM qui est ex\u00e9cut\u00e9 imm\u00e9diatement apr\u00e8s la fin de POST.</li> <li>\u00c9tape 3: Le boot loader effectue une initialisation de bas niveau du CPU. Il initialise les registres du processeur qui contr\u00f4lent l'emplacement auquel la m\u00e9moire physique est mapp\u00e9e, la quantit\u00e9 de m\u00e9moire et sa vitesse.</li> <li>\u00c9tape 4: Le boot loader initialise le syst\u00e8me de fichiers flash sur la carte syst\u00e8me.</li> <li>\u00c9tape 5: Finalement, le chargeur de d\u00e9marrage localise et charge dans la m\u00e9moire une image par d\u00e9faut du logiciel du syst\u00e8me d'exploitation IOS et donne le contr\u00f4le du commutateur \u00e0 l'IOS.</li> </ul>"},{"location":"cfa/1/#114-recuperation-apres-une-panne-de-systeme","title":"1.1.4 - R\u00e9cup\u00e9ration apr\u00e8s une panne de syst\u00e8me","text":"<p>Le chargeur de d\u00e9marrage est accessible via une connexion \u00e0 la console en suivant ces \u00e9tapes :</p> <ul> <li>\u00c9tape 1. Connectez un PC par un c\u00e2ble de console au port de console du commutateur. Configurez le logiciel d'\u00e9mulation de terminal pour le connecter au commutateur.</li> <li>\u00c9tape 2. D\u00e9branchez le cordon d'alimentation du commutateur.</li> <li>\u00c9tape 3. Rebranchez le cordon d'alimentation au commutateur et, dans les 15 secondes qui suivent, appuyez sur le bouton Mode et maintenez-le enfonc\u00e9 pendant que la LED du syst\u00e8me clignote encore en vert.</li> <li>\u00c9tape 4. Continuez \u00e0 appuyer sur le bouton Mode jusqu'\u00e0 ce que le voyant lumineux du syst\u00e8me devienne bri\u00e8vement orange puis vert fixe ; puis rel\u00e2chez le bouton Mode.</li> <li>\u00c9tape 5. L\u2019invite switch: appara\u00eet dans le logiciel d'\u00e9mulation de terminal sur le PC.</li> </ul> <p>Pour obtenir le chemin du BOOT: <pre><code>set\n</code></pre></p> <p>Pour visualiser les r\u00e9pertoires et fichiers flash: <pre><code>dir flash\n</code></pre></p> <p>Pour modifier le chemin du BOOT: <pre><code>BOOT=flash:&lt;chemin&gt;\n</code></pre></p>"},{"location":"cfa/1/#116-exemple-de-configuration-pour-controle-a-distance","title":"1.1.6 - Exemple de configuration pour contr\u00f4le a distance","text":"<p>SVI = Switch Virtual Interface</p> <p>Il s'agit de l'interface de management a distance</p> <pre><code>conf t\nip default-gateway 172.17.99.1\nint vlan 99\nip address 172.17.99.11 255.255.255.0\nipv6 address 2001:db8:acad:99::1/64\nno shut\nshow ip interface brief\nshow ipv6 interface brief\nend\nwr\n</code></pre>"},{"location":"cfa/1/#122-configuration-des-ports-de-commutateur-au-niveau-de-la-couche-physique","title":"1.2.2 - Configuration des ports de commutateur au niveau de la couche physique","text":"<pre><code>conf t\nint FastEthernet 0/1\nduplex full\nspeed 100\nend\nwr\n</code></pre>"},{"location":"cfa/1/#123-auto-mdix","title":"1.2.3 - Auto-MDIX","text":"<p>Cette fonctionnali\u00e9 supprime le besoin de choisir entre c\u00e2bles droits et crois\u00e9s.</p> <p>Sur l'interface concern\u00e9: <pre><code>mdix auto\n</code></pre></p> <p>Cette fonction est activ\u00e9e par d\u00e9faut sur les Catalyst 2960 et 3560</p> <p>Les versions ant\u00e9rieures doivent \u00eatre param\u00e9tr\u00e9es manuellement.</p>"},{"location":"cfa/1/#124-commandes-de-verification-des-commutateurs","title":"1.2.4 - Commandes de v\u00e9rification des commutateurs","text":"T\u00e2che Commande Afficher l'\u00e9tat et la configuration des interfaces. <code>show interfaces [interface-id]</code> Afficher la configuration initiale actuelle. <code>show startup-config</code> Afficher la configuration courante. <code>show running-config</code> Afficher les informations sur le syst\u00e8me de fichiers Flash. <code>show flash</code> Afficher l'\u00e9tat mat\u00e9riel et logiciel du syst\u00e8me. <code>show version</code> Afficher l'historique de la commande saisie. <code>show history</code> Afficher les informations IP d'une interface. <code>show ip interface [interface-id]</code> OU <code>show ipv6 interface [interface-id]</code> Afficher la table d'adresses MAC. <code>show mac-address-table</code> OU <code>show mac address-table</code>"},{"location":"cfa/1/#141-configuration-des-parametres-de-base-du-routeur","title":"1.4.1 - Configuration des param\u00e8tres de base du routeur","text":"<pre><code>conf t\nhostname R1\nenable secret class\nline console 0\npassword cisco\nlogin\nexit\nline vty 0 4\npassword cisco\nlogin\nexit\nservice password-encryption\nbanner motd #Authorized Access Only!#\nwr\n</code></pre>"},{"location":"cfa/1/#144-configurer-les-interfaces-des-routeurs","title":"1.4.4 - Configurer les interfaces des routeurs","text":"<pre><code>interface gigabitethernet 0/0/0\nip address 192.168.10.1 255.255.255.0\nipv6 address 2001:db8:acad:1::1/64\ndescription Link to LAN 1\nno shutdown\nexit\ninterface gigabitethernet 0/0/1\nip address 192.168.11.1 255.255.255.0\nipv6 address 2001:db8:acad:2::1/64\ndescription Link to LAN 2\nno shutdown\nexit\ninterface serial 0/0/0\nip address 209.165.200.225 255.255.255.252\nipv6 address 2001:db8:acad:3::225/64\ndescription Link to R2\nno shutdown\nexit\n</code></pre>"},{"location":"cfa/1/#146-loopback","title":"1.4.6 - Loopback","text":"<p>Les interfaces de loopback \u00e9tant toujours disponible, elle est utile pour certains tests.</p> <pre><code>interface loopback 0\nip address 10.0.0.1 255.255.255.0\nexit\n</code></pre>"},{"location":"cfa/1/#152-verification-de-letat-de-linterface","title":"1.5.2 - V\u00e9rification de l'\u00e9tat de l'interface","text":"<pre><code>show ip interface brief\nshow ipv6 interface brief\nshow running-config interface &lt;interface&gt;\nshow ip route\nshow ipv6 route\n</code></pre>"},{"location":"cfa/1/#156-filtrage-des-resultats-de-commande-show","title":"1.5.6 - Filtrage des r\u00e9sultats de commande show","text":"<p>Pour param\u00e9trer le nombre de lignes d'output a afficher avant le \"--More--\" (entrer <code>0</code> pour tout afficher): <pre><code>terminal lenght &lt;nombre&gt;\n</code></pre></p> <p>On peut aussi piper les r\u00e9sultat vers 4 pseudo-expressions r\u00e9guli\u00e8res:</p> <ul> <li>section (montrer les lignes qui commencent par X)</li> <li>include (montrer les lignes qui contiennent X)</li> <li>exclude (montrer les lignes qui ne contiennent pas X)</li> <li>begin (afficher toutes les lignes a partir de la ligne qui contient X)</li> </ul> <p>Utilisation:</p> <pre><code>&lt;commande&gt; | &lt;pseudo-expression&gt; &lt;chaine recherch\u00e9e&gt;\n</code></pre>"},{"location":"cfa/2/","title":"2 - Concepts de Commutation","text":""},{"location":"cfa/2/#212-table-dadresse-mac-du-commutateur","title":"2.1.2 - Table d'adresse MAC du commutateur","text":"<p>La table d'adresses MAC est contenue dans la M\u00e9moire Adressable de Contenu (CAM).</p>"},{"location":"cfa/2/#216-commutation-par-stockage-et-retransmission-store-and-forward","title":"2.1.6 - Commutation par stockage et retransmission (store and forward)","text":"<ul> <li>V\u00e9rification des erreurs avec la s\u00e9quence de v\u00e9rification de la trame (FCS).</li> <li>Mise en m\u00e9moire tampom automatique permettant de faire transiter les trammes entre des interfaces de vitesses diff\u00e9rentes.</li> </ul>"},{"location":"cfa/2/#217-commutation-par-coupure-cut-through","title":"2.1.7 - Commutation par coupure (cut-through)","text":"<ul> <li>Pas de FCS, donc transmission de trames corrompues.</li> <li>Plus adapt\u00e9 aux applications HPC (high-performance computing) (ping inf\u00e9rieur \u00e0 10 microsecondes).</li> </ul>"},{"location":"cfa/3/","title":"3 - VLANs","text":""},{"location":"cfa/3/#312-avantages-dune-conception-vlan","title":"3.1.2 - Avantages d'une conception VLAN","text":"B\u00e9n\u00e9fice Description Domaines de Diffusion Plus Petits La division d'un r\u00e9seau en VLAN r\u00e9duit le nombre de p\u00e9riph\u00e9riques dans le domaine de diffusion. S\u00e9curit\u00e9 optimis\u00e9e Seuls les utilisateurs du m\u00eame VLAN peuvent communiquer ensemble. Am\u00e9lioration de l'efficacit\u00e9 des ressources IT Les VLAN simplifient la gestion du r\u00e9seau car les utilisateurs ayant des besoins similaires peuvent \u00eatre configur\u00e9s sur le m\u00eame VLAN. Les VLAN peuvent \u00eatre nomm\u00e9s pour les rendre plus faciles \u00e0 identifier. Co\u00fbt r\u00e9duit Les VLAN r\u00e9duisent la n\u00e9cessit\u00e9 de mises \u00e0 niveau co\u00fbteuses du r\u00e9seau et utilisent plus efficacement la largeur de bande et les liaisons montantes existantes, ce qui permet de r\u00e9aliser des \u00e9conomies. Meilleures performances Les domaines de diffusion plus petits r\u00e9duisent le trafic inutile sur le r\u00e9seau et am\u00e9liorent les performances. Une gestion simplifi\u00e9e des projets et des applications Les VLAN regroupent les utilisateurs et les p\u00e9riph\u00e9riques r\u00e9seau pour prendre en charge l'entreprise ou les exigences g\u00e9ographiques. Avoir des fonctions distinctes rend la gestion d'un projet ou l'utilisation d'un application sp\u00e9cialis\u00e9e plus facile ; un exemple d'une telle application est une plateforme de d\u00e9veloppement de l'apprentissage en ligne pour la facult\u00e9."},{"location":"cfa/3/#313-types-de-reseaux-locaux-virtuels","title":"3.1.3 - Types de r\u00e9seaux locaux virtuels","text":"VLAN par d\u00e9fautVLAN de donn\u00e9esVLAN natifVLAN de gestionVLAN VoIP <p>Le VLAN par d\u00e9faut est le VLAN 1.</p> <ul> <li>Tous les ports sont attribu\u00e9s \u00e0 VLAN 1 par d\u00e9faut.</li> <li>Le VLAN natif est le VLAN 1 par d\u00e9faut.</li> <li>Le VLAN de gestion est le VLAN 1 par d\u00e9faut.</li> <li>Le VLAN 1 ne peut pas \u00eatre renomm\u00e9 ni supprim\u00e9</li> </ul> <p>Les VLANs de donn\u00e9es sont des VLAN configur\u00e9s pour s\u00e9parer le trafic g\u00e9n\u00e9r\u00e9 par l'utilisateur. Les VLANs de donn\u00e9es sont utilis\u00e9s pour diviser un r\u00e9seau en groupes d\u2019utilisateurs ou de p\u00e9riph\u00e9riques. Un r\u00e9seau moderne aurait de nombreux VLANs de donn\u00e9es en fonction des besoins de l'organisation. Notez que le trafic de gestion vocale et r\u00e9seau ne doit pas \u00eatre autoris\u00e9 sur les VLANs de donn\u00e9es.</p> <p>Le VLAN natif prend en charge tous les paquets qui n'ont pas de tag VLAN.</p> <p>Par d\u00e9faut, il correspond au VLAAN par d\u00e9faut (super tournure de phrase) mais il est conseill\u00e9 de le param\u00e9trer en tant que VLAN distinct et inutilis\u00e9.</p> <p>Un VLAN de gestion est un VLAN de donn\u00e9es configur\u00e9 sp\u00e9cifiquement pour le trafic de gestion r\u00e9seau, y compris SSH, Telnet, HTTPS, HHTP et SNMP. Par d\u00e9faut, le VLAN 1 est configur\u00e9 comme VLAN de gestion.</p> <p>Le trafic VoIP requiert les \u00e9l\u00e9ments suivants :</p> <ul> <li>bande passante consolid\u00e9e pour garantir la qualit\u00e9 de la voix ;</li> <li>priorit\u00e9 de transmission par rapport aux autres types de trafic r\u00e9seau ;</li> <li>possibilit\u00e9 de routage autour des zones encombr\u00e9es du r\u00e9seau ;</li> <li> <p>d\u00e9lai inf\u00e9rieur \u00e0 150 ms sur tout le r\u00e9seau.</p> </li> <li> <p>Pour remplir ces conditions, le r\u00e9seau entier doit \u00eatre con\u00e7u pour prendre en charge la voix sur IP.</p> </li> </ul>"},{"location":"cfa/3/#324-identification-du-vlan-a-laide-dune-balise","title":"3.2.4 - Identification du VLAN \u00e0 l'aide d'une balise","text":"<p>Composition d'une trame:</p> MAC dest MAC src Balise Type / Longueur Donn\u00e9es FCS <p>Composition de la balise:</p> <ul> <li>Type - Une valeur de 2 octets appel\u00e9e valeur d'ID de protocole de balise (TPID). Pour Ethernet, il est d\u00e9fini sur hexad\u00e9cimal 0x8100.</li> <li>Priorit\u00e9 utilisateur - Une valeur de 3 bits qui soutient la mise en \u0153uvre du niveau ou du service.</li> <li>CFI (Canonical Format Identifier) - Identificateur de 1 bit qui permet aux trames Token Ring d'\u00eatre transport\u00e9es sur les liaisons Ethernet.</li> <li>VID (VLAN ID) - Un num\u00e9ro d'identification VLAN de 12 bits qui prend en charge jusqu'\u00e0 4096 ID VLAN.</li> </ul> Type (0x8100) Pri CFI VID"},{"location":"cfa/3/#325-vlan-natifs-et-etiquetage-8021q","title":"3.2.5 - VLAN natifs et \u00e9tiquetage 802.1Q","text":"<p>La norme IEEE 802.1Q sp\u00e9cifie un VLAN natif pour les liaisons de trunk, qui est par d\u00e9faut VLAN 1. Lorsqu'une trame non balis\u00e9e arrive sur un port de trunk, elle est attribu\u00e9 au VLAN natif. Les trames de gestion envoy\u00e9es entre les commutateurs sont un exemple de trafic g\u00e9n\u00e9ralement non balis\u00e9. Si la liaison entre deux commutateurs est un trunk, le commutateur envoie le trafic non marqu\u00e9 sur le VLAN natif.</p> <p>Si un port agr\u00e9g\u00e9 802.1Q re\u00e7oit une trame \u00e9tiquet\u00e9e avec un ID de VLAN identique \u00e0 celui du VLAN natif, il abandonne la trame.</p> <p>Lorsqu\u2019un port trunk du commutateur Cisco re\u00e7oit des trames non \u00e9tiquet\u00e9es (qui sont peu communes dans un r\u00e9seau bien con\u00e7u), il transf\u00e8re ces trames au VLAN natif. S\u2019il n\u2019existe aucun p\u00e9riph\u00e9rique associ\u00e9 au VLAN natif (ce qui n\u2019est pas rare) et aucun autre port trunk (ce qui n\u2019est pas rare non plus), la trame est abandonn\u00e9e.</p>"},{"location":"cfa/3/#331-plages-vlan-sur-les-commutateurs-catalyst","title":"3.3.1 - Plages VLAN sur les commutateurs Catalyst","text":""},{"location":"cfa/3/#vlan-a-gamme-normale","title":"VLAN \u00e0 gamme normale","text":"<p>Voici les caract\u00e9ristiques des VLANs \u00e0 plage normale :</p> <ul> <li>Ils sont utilis\u00e9s dans tous les r\u00e9seaux de petites et moyennes organisations et d'entreprises.</li> <li>Ils sont identifi\u00e9s par un ID VLAN compris entre 1 et 1005.</li> <li>(Les ID 1002 \u00e0 1005 sont r\u00e9serv\u00e9s aux VLAN Token Ring et FDDI [Fiber Distributed Data Interface].)</li> <li>Les ID 1 et 1002 \u00e0 1005 sont automatiquement cr\u00e9\u00e9s et ne peuvent pas \u00eatre supprim\u00e9s.</li> <li>Les configurations sont stock\u00e9es dans la m\u00e9moire flash du commutateur dans un fichier de base de donn\u00e9es VLAN appel\u00e9 vlan.dat.</li> <li>Lorsqu' il est configur\u00e9, le protocole VLAN Trunking Protocol (VTP) permet de synchroniser la base de donn\u00e9es VLAN entre les commutateurs.</li> </ul>"},{"location":"cfa/3/#vlan-a-gamme-etendue","title":"VLAN \u00e0 gamme \u00e9tendue","text":"<p>Voici les caract\u00e9ristiques des VLANs \u00e0 plage \u00e9tendue :</p> <ul> <li>Ils sont utilis\u00e9s par les fournisseurs de services pour desservir de multiples clients et par des entreprises mondiales suffisamment grandes pour avoir besoin d'ID de VLAN \u00e0 port\u00e9e \u00e9tendue.</li> <li>Ils sont identifi\u00e9s par un ID VLAN entre 1006 et 4094.</li> <li>Les configurations sont enregistr\u00e9es, par d\u00e9faut, dans la configuration en cours.</li> <li>Ils prennent en charge moins de fonctions VLAN que les VLANs \u00e0 port\u00e9e normale.</li> <li>N\u00e9cessite une configuration en mode transparent VTP pour prendre en charge les VLANs \u00e0 port\u00e9e \u00e9tendue.</li> </ul> <p>Remarque</p> <p>4096 est la limite sup\u00e9rieure pour le nombre de VLAN disponibles sur les commutateurs Catalyst, car il y a 12 bits dans le champ ID VLAN de l'en-t\u00eate IEEE 802.1Q.</p>"},{"location":"cfa/3/#332-commandes-de-creation-de-vlan","title":"3.3.2 - Commandes de cr\u00e9ation de VLAN","text":"<pre><code>configure terminal\nvlan &lt;vlan-id&gt;\nname &lt;vlan-name&gt;\nend\n</code></pre> <p>Sauvegarde</p> <p>Les VLAN sont directement enregistr\u00e9s dans la m\u00e9moire morte, il n'y a donc pas besoin de sauvegarder la configuration.</p>"},{"location":"cfa/3/#334-commandes-dattribution-de-port-vlan","title":"3.3.4 - Commandes d'attribution de port VLAN","text":"<pre><code>configure terminal\ninterface &lt;interface-id&gt;\nswitchport &lt;mode access&gt;\nswitchport access &lt;vlan vlan-id&gt;\nend\n</code></pre>"},{"location":"cfa/3/#337-exemple-de-vlan-de-donnees-et-de-voix","title":"3.3.7 - Exemple de VLAN de donn\u00e9es et de voix","text":"<pre><code>vlan 20\nname student\nvlan 150\nname VOICE\nexit\ninterface fa0/18\nswitchport mode access\nswitchport access vlan 20\nmls qos trust cos\nswitchport voice vlan 150\nend\n</code></pre>"},{"location":"cfa/3/#338-verification-des-informations-vlan","title":"3.3.8 - V\u00e9rification des informations VLAN","text":"<p>Quelques facons d'obtenir des informations sur les VLAN:</p> <pre><code>show vlan brief\nshow vlan id &lt;vlan-id&gt;\nshow vlan name &lt;vlan-name&gt;\nshow vlan summary\n</code></pre>"},{"location":"cfa/3/#3310-supprimer-le-vlan","title":"3.3.10 - Supprimer le VLAN","text":"<pre><code>no vlan &lt;vlan-id&gt;\n</code></pre> <p>Attention</p> <p>Avant de supprimer un VLAN, r\u00e9attribuez d'abord tous les ports membres \u00e0 un VLAN diff\u00e9rent. Tous les ports qui ne sont pas d\u00e9plac\u00e9s vers un VLAN actif sont incapables de communiquer avec d'autres h\u00f4tes apr\u00e8s la suppression du VLAN et jusqu'\u00e0 ce qu'ils soient attribu\u00e9s \u00e0 un VLAN actif.</p> <p>L'ensemble du fichier vlan.dat peut \u00eatre supprim\u00e9 \u00e0 l'aide de la commande privil\u00e9gi\u00e9e du mode EXEC delete flash:vlan.dat . La version abr\u00e9g\u00e9e de la commande (delete vlan.dat) peut \u00eatre utilis\u00e9e si le fichier vlan.dat n'a pas \u00e9t\u00e9 d\u00e9plac\u00e9 de son emplacement par d\u00e9faut. </p>"},{"location":"cfa/3/#341-commandes-de-configuration-du-trunk","title":"3.4.1 - Commandes de configuration du trunk","text":"<pre><code>configure terminal\ninterface interface-id\nswitchport mode trunk\nswitchport trunk native vlan &lt;vlan-id&gt;\nswitchport trunk allowed vlan &lt;vlan-list&gt;\nend\n</code></pre>"},{"location":"cfa/3/#344-reinitialisation-du-trunk-a-letat-par-defaut","title":"3.4.4 - R\u00e9initialisation du trunk \u00e0 l\u2019\u00e9tat par d\u00e9faut","text":"<pre><code>interface &lt;int-num&gt;\nno switchport trunk allowed vlan\nno switchport trunk native vlan\nend\n</code></pre>"},{"location":"cfa/3/#351-introduction-au-dtp","title":"3.5.1 - Introduction au DTP","text":"<p>Certains commutateurs Cisco ont un protocole propri\u00e9taire qui leur permet de n\u00e9gocier automatiquement la connexion avec un p\u00e9riph\u00e9rique voisin. Ce protocole est appel\u00e9 Dynamic Trunking Protocol (DTP). Le DTP peut acc\u00e9l\u00e9rer le processus de configuration d'un administrateur r\u00e9seau. Les interfaces de trunk r\u00e9seau Ethernet prennent en charge diff\u00e9rents modes de lignes r\u00e9seau. Une interface peut \u00eatre d\u00e9finie sur le trunk ou non, ou pour n\u00e9gocier le trunk avec l'interface voisine. La n\u00e9gociation de trunk est g\u00e9r\u00e9e par le protocole DTP (Dynamic Trunking Protocol) qui fonctionne uniquement de point \u00e0 point, entre les p\u00e9riph\u00e9riques r\u00e9seau.</p> <p>Si le commutateur est connect\u00e9 \u00e0 un trunk qui ne supporte pas le DTP:</p> <pre><code>switchport mode trunk\nswitchport nonegotiate\n</code></pre> <p>Pour r\u00e9acriver le DTP:</p> <pre><code>switchport mode dynamic auto\n</code></pre>"},{"location":"cfa/4/","title":"4 - routage inter-VLAN","text":""},{"location":"cfa/4/#413-routage-inter-vlan-avec-la-methode-router-on-a-stick","title":"4.1.3 - Routage inter-VLAN avec la m\u00e9thode router-on-a-stick","text":"<p>Une interface Ethernet de routeur Cisco IOS est configur\u00e9e comme un trunk 802.1Q et connect\u00e9e \u00e0 un port de trunk sur un commutateur de couche 2. Plus pr\u00e9cis\u00e9ment, l'interface du routeur est configur\u00e9e \u00e0 l'aide de sous-interfaces pour identifier les VLAN routables.</p> <p>Les sous-interfaces configur\u00e9es sont des interfaces virtuelles logicielles. Chacune est associ\u00e9e \u00e0 une seule interface Ethernet physique. Les sous-interfaces sont configur\u00e9es dans un logiciel sur un routeur. Chaque sous-interface est configur\u00e9e ind\u00e9pendamment avec sa propre adresse IP et une affectation VLAN. Les sous-interfaces sont configur\u00e9es pour diff\u00e9rents sous-r\u00e9seaux correspondant \u00e0 une affectation VLAN. Cela facilite le routage logique.</p>"},{"location":"cfa/4/#414-routage-inter-vlan-sur-un-commutateur-de-couche-3","title":"4.1.4 - Routage inter-VLAN sur un commutateur de couche 3","text":"<p>La m\u00e9thode moderne d'ex\u00e9cution du routage inter-VLAN consiste \u00e0 utiliser des commutateurs de couche 3 et des interfaces virtuelles commut\u00e9es (SVI). Une interface SVI est une interface virtuelle configur\u00e9e dans un commutateur de couche 3, comme illustr\u00e9 dans la figure.</p> <ul> <li> Cette m\u00e9thode est beaucoup plus rapide que le mod\u00e8le Router-on-a-stick, car l'ensemble de la commutation et du routage est assur\u00e9 de mani\u00e8re mat\u00e9rielle.</li> <li> Il n'est pas n\u00e9cessaire d'utiliser des liaisons externes entre le commutateur et le routeur pour le routage.</li> <li> Ils ne sont pas limit\u00e9s \u00e0 une liaison, car les canaux EtherChannels de couche 2 peuvent \u00eatre utilis\u00e9s comme liaisons de trunk entre les commutateurs pour augmenter la bande passante.</li> <li> La latence est bien plus faible, car les donn\u00e9es n'ont pas besoin de quitter le commutateur pour \u00eatre achemin\u00e9es vers un autre r\u00e9seau.</li> <li> Ils sont plus souvent d\u00e9ploy\u00e9s dans un r\u00e9seau local de campus que les routeurs.</li> </ul>"},{"location":"cfa/4/#424-configuration-de-la-sous-interface-r1","title":"4.2.4 - Configuration de la sous-interface R1","text":"<p>Configuration des interfaces our les router-on-a-stick:</p> <ul> <li>encapsulation dot1q vlan_id [native] l'option - This command configures the subinterface to respond to 802.1Q encapsulated traffic from the specified vlan-id. The native mot de cl\u00e9 n'est ajout\u00e9e que pour d\u00e9finir le VLAN natif sur autre chose que VLAN 1.1</li> <li>ip address ip-address subnet-mask - Cette commande configure l'adresse IPv4 de la sous-interface. Cette adresse sert g\u00e9n\u00e9ralement de passerelle par d\u00e9faut pour le VLAN identifi\u00e9.</li> </ul> <p>Exemple: </p> <p><pre><code>interface G0/0/1.10\ndescription Default Gateway for VLAN 10\nencapsulation dot1Q 10\nip add 192.168.10.1 255.255.255.0\nexit\n</code></pre> <pre><code>interface G0/0/1\ndescription Trunk link to S1\nno shut\nend\n</code></pre></p>"},{"location":"cfa/4/#437-configuration-du-routage-sur-un-commutateur-de-couche-3","title":"4.3.7 - Configuration du routage sur un commutateur de couche 3","text":"<p>Exemple:</p> <pre><code>interface GigabitEthernet1/0/1\ndescription routed Port Link to R1\nno switchport\nip address 10.10.10.2 255.255.255.0\nno shut\nexit\nip routing\nrouter ospf 10\nnetwork 192.168.10.0 0.0.0.255 area 0\nnetwork 192.168.20.0 0.0.0.255 area 0\nnetwork 10.10.10.0 0.0.0.3 area 0\n^Z\n</code></pre> <ol> <li> <p>Oui, c'\u00e9tait vraiment marqu\u00e9 comme ca dans le cours, avec la transition anglais -&gt; fran\u00e7ais au milieu de la phrase ...\u00a0\u21a9</p> </li> </ol>"},{"location":"cfa/5/","title":"5 - Concepts du STP","text":""},{"location":"cfa/5/#512-protocole-stp-spanning-tree-protocol","title":"5.1.2 - Protocole STP (Spanning Tree Protocol)","text":"<p>Le protocole STP est un protocole r\u00e9seau de pr\u00e9vention des boucles qui permet la redondance tout en cr\u00e9ant une topologie de couche 2 sans boucle. IEEE 802.1D est la norme IEEE MAC Bridging d'origine pour STP.</p>"},{"location":"cfa/5/#521-etapes-vers-une-topologie-sans-boucle","title":"5.2.1 - \u00c9tapes vers une topologie sans boucle","text":"<p>\u00c0 l'aide de l\u2019algorithme spanning tree (STA), le protocole STP cr\u00e9e une topologie sans boucle en quatre \u00e9tapes:</p> <ul> <li>Choisir le pont racine</li> <li>Choisir les ports racine.</li> <li>Choisir les ports d\u00e9sign\u00e9s.</li> <li>Choisir des ports alternatifs (bloqu\u00e9s).</li> </ul> <p>Pendant le fonctionnement de STA et de STP, les commutateurs utilisent des BPDU (Bridge Protocol Data Units) pour partager des informations sur eux-m\u00eames et sur leurs connexions. Les BPDU permettent de choisir le pont racine, les ports racine, les ports d\u00e9sign\u00e9s et les ports alternatifs. Chaque trame BPDU contient un ID de pont (bridge ID) qui identifie le commutateur ayant envoy\u00e9 la trame BPDU. Le BID participe \u00e0 la prise de nombreuses d\u00e9cisions STA, y compris les r\u00f4les de pont racine et de port. Comme illustr\u00e9 dans la figure , l'ID de pont (BID) contient une valeur de priorit\u00e9, l'adresse MAC du commutateur et un ID syst\u00e8me \u00e9tendu. La valeur d'ID de pont la plus basse est d\u00e9termin\u00e9e par une combinaison de ces trois champs.</p>"},{"location":"cfa/5/#522-1-choisir-le-pont-racine","title":"5.2.2 - 1. Choisir le pont racine","text":"<p>Le commutateur ayant l'identificateur de pont (BID) le plus bas devient le pont racine. Initialement, tous les commutateurs se d\u00e9clarent en tant que pont racine avec son propre BID d\u00e9fini comme l'ID racine. Finalement, les commutateurs apprennent par l'\u00e9change de BPDU quel commutateur poss\u00e8de le BID le plus bas et se mettent au courant d'un pont racine.</p>"},{"location":"cfa/5/#523-consequences-des-bid-par-defaut","title":"5.2.3 - Cons\u00e9quences des BID par d\u00e9faut","text":"<p>\u00c9tant donn\u00e9 que le BID par d\u00e9faut est 32768, il est possible que deux commutateurs ou plusieurs aient la m\u00eame priorit\u00e9. Dans ce sc\u00e9nario, o\u00f9 les priorit\u00e9s sont identiques, le commutateur ayant l'adresse MAC la plus basse deviendra le pont racine. Pour garantir que la d\u00e9cision relative au pont racine r\u00e9pond au mieux aux besoins du r\u00e9seau, il est recommand\u00e9 que l'administrateur configure le commutateur pont racine souhait\u00e9 avec une priorit\u00e9 inf\u00e9rieure.</p>"},{"location":"cfa/5/#525-choisir-les-ports-racine","title":"5.2.5 - Choisir les ports racine.","text":"<p>Une fois que le pont racine a \u00e9t\u00e9 d\u00e9fini, l'algorithme STA est utilis\u00e9 pour s\u00e9lectionner le port racine. Chaque commutateur non-root s\u00e9lectionnera un port racine. Le port racine est le port le plus proche du pont racine en termes de co\u00fbts g\u00e9n\u00e9raux (meilleur chemin) vers le pont racine. Ce co\u00fbt g\u00e9n\u00e9ral est connu sous le nom de co\u00fbt du chemin racine interne.</p> <p>Le co\u00fbt du chemin racine interne \u00e9quivaut \u00e0 la somme des co\u00fbts de tous les ports le long du chemin vers le pont racine.</p>"},{"location":"cfa/5/#526-3-choisir-les-ports-designes","title":"5.2.6 - 3. Choisir les ports d\u00e9sign\u00e9s.","text":"<p>La partie de pr\u00e9vention des boucles du spanning tree devient \u00e9vidente au cours de ces deux prochaines \u00e9tapes. Une fois que chaque commutateur s\u00e9lectionne un port racine, les commutateurs s\u00e9lectionnent ensuite les ports d\u00e9sign\u00e9s.</p> <p>Chaque segment entre deux commutateurs aura un port d\u00e9sign\u00e9. Le port d\u00e9sign\u00e9 est un port sur le segment (avec deux commutateurs) qui a le co\u00fbt du chemin racine interne vers le pont racine. En d'autres termes, le port d\u00e9sign\u00e9 a le meilleur chemin pour recevoir le trafic qui conduit au pont racine.</p> <p>Ce qui n'est pas un port racine ou un port d\u00e9sign\u00e9 devient un port alternatif ou bloqu\u00e9. Le r\u00e9sultat final est un chemin unique entre chaque commutateur et le pont racine.</p>"},{"location":"cfa/5/#528-choisir-un-port-racine-a-partir-de-plusieurs-chemins-dacces-a-cout-egal","title":"5.2.8 - Choisir un port racine \u00e0 partir de plusieurs chemins d'acc\u00e8s \u00e0 co\u00fbt \u00e9gal","text":"<p>Lorsqu'un commutateur poss\u00e8de plusieurs chemins d'acc\u00e8s \u00e0 co\u00fbt \u00e9gal vers le pont racine, le commutateur d\u00e9termine un port en utilisant les crit\u00e8res suivants:</p> <ul> <li>BID de pont exp\u00e9diteur le plus faible</li> <li>Priorit\u00e9 de port la plus faible</li> <li>ID de port exp\u00e9diteur le plus faible</li> </ul>"},{"location":"cfa/5/#529-stp-minuteurs-et-etats-des-ports","title":"5.2.9 - STP minuteurs et \u00e9tats des ports","text":"<p>La convergence STP n\u00e9cessite trois minuteurs, comme suit:</p> <ul> <li>Minuteur Hello - le minuteur Hello est l'intervalle entre les mises \u00e0 jour BPDU. La valeur par d\u00e9faut est 2 secondes, mais les valeurs autoris\u00e9es peut \u00eatre modifier entre 1 et 10 secondes.</li> <li>Minuteur Forward Delay - le minuteur Forward Delay est le temps pass\u00e9 \u00e0 l'\u00e9tat d'\u00e9coute et d'apprentissage. La valeur par d\u00e9faut est de 15 secondes mais peut \u00eatre modifi\u00e9e entre 4 et 30 secondes.</li> <li>Minuteur Max Age - le minuteur Max Age est la dur\u00e9e maximale d'attente d'un commutateur avant de tenter de modifier la topologie STP. La valeur par d\u00e9faut est 20 secondes mais peut \u00eatre modifi\u00e9e entre 6 et 40 secondes.</li> </ul> <p>Remarque</p> <p>Les dur\u00e9es par d\u00e9faut peuvent \u00eatre modifi\u00e9es sur le pont racine, ce qui dicte la valeur de ces minuteurs pour le domaine STP.</p> \u00c9tat du port Description Blocage Le port est un port alternatif qui ne participe pas au transmission de trames. Le port re\u00e7oit des trames BPDU pour d\u00e9terminer l'emplacement et l'ID racine du pont racine. Les trames BPDU d\u00e9terminent \u00e9galement les r\u00f4les de port de chaque port de commutateur doit assumer dans la topologie STP active finale. Gr\u00e2ce au minuteur Max age de 20 secondes, un port de commutateur qui n'a pas re\u00e7u un BPDU attendu d'un commutateur voisin passera \u00e0 l'\u00e9tat de blocage. \u00c9coute Apr\u00e8s l'\u00e9tat de blocage, un port passe \u00e0 l'\u00e9tat d'\u00e9coute. Le port re\u00e7oit des BPDU pour d\u00e9terminer le chemin d'acc\u00e8s \u00e0 la racine. le port de commutateur transmet \u00e9galement ses propres trames BPDU et informe les commutateurs adjacents que le port du commutateur se pr\u00e9pare \u00e0 participer \u00e0 la topologie active. Apprentissage Un port de commutateur passe \u00e0 l'\u00e9tat d'apprentissage apr\u00e8s l'\u00e9tat d'\u00e9coute. Pendant l'\u00e9tat d'apprentissage, le port du commutateur re\u00e7oit et traite les BPDU et se pr\u00e9pare \u00e0 participer \u00e0 la transmission de trame. Il commence \u00e9galement \u00e0 remplir la table d'adresses MAC. Cependant, dans l'\u00e9tat d'apprentissage, les trames d'utilisateur ne sont pas transf\u00e9r\u00e9es vers la destination. Acheminement Dans l'\u00e9tat d'acheminement, un port de commutateur est consid\u00e9r\u00e9 comme une partie du topologie. Le port du commutateur transf\u00e8re le trafic utilisateur et envoie et re\u00e7oit les trames BPDU. D\u00e9sactivation Un port de commutateur \u00e0 l'\u00e9tat D\u00e9sactivation ne participe pas \u00e0 l'arbre recouvrant et ne transmet pas les trames. L'\u00e9tat D\u00e9sactivation est d\u00e9fini lorsque le port de commutateur est administrativement d\u00e9sactiv\u00e9."},{"location":"cfa/5/#532-concepts-rstp","title":"5.3.2 - Concepts RSTP","text":"<p>RSTP (IEEE 802.1w) remplace le protocole 802.1D d'origine, tout en conservant la r\u00e9trocompatibilit\u00e9. La terminologie du protocole STP 802.1w est essentiellement la m\u00eame que celle du protocole STP IEEE 802.1D initial. La plupart des param\u00e8tres ont \u00e9t\u00e9 conserv\u00e9s. les utilisateurs d\u00e9j\u00e0 familiaris\u00e9s avec la norme STP d'origine puissent rapidement configurer le protocole RSTP. Le m\u00eame algorithme de spanning tree est utilis\u00e9 pour STP et RSTP pour d\u00e9terminer les r\u00f4les de port et la topologie.</p> <p>Le protocole RSTP optimise le recalcul de l'arbre recouvrant lorsque la topologie d'un r\u00e9seau de couche 2 change. Le protocole RSTP assure un temps de convergence beaucoup plus rapide dans un r\u00e9seau correctement configur\u00e9, parfois de l'ordre de quelques centaines de millisecondes. Si un port est configur\u00e9 comme port alternatif, il peut passer imm\u00e9diatement \u00e0 l'\u00e9tat de transmission sans attendre que le r\u00e9seau converge.</p> <p>Remarque</p> <p>Rapid PVST+ est l'impl\u00e9mentation Cisco du protocole RSTP par VLAN. En utilisant le protocole Rapid PVST+ une instance ind\u00e9pendante s'ex\u00e9cute sur chaque VLAN.</p>"},{"location":"cfa/5/#533-etats-de-port-rstp-et-roles-de-port","title":"5.3.3 - \u00c9tats de port RSTP et r\u00f4les de port","text":"<p>Comme le montre la figure, il n'y a que trois \u00e9tats de port dans le RSTP qui correspondent aux trois \u00e9tats op\u00e9rationnels possibles dans le STP. Les \u00e9tats de d\u00e9sactivation, de blocage et d'\u00e9coute de la 802.1D sont fusionn\u00e9s en un \u00e9tat unique de suppression de la 802.1w.</p> <p>Le port alternatif a un chemin d'acc\u00e8s alternatif au pont racine. Le port de secours est une veille sur un support partag\u00e9, tel qu'un concentrateur. Un port de secours est moins commun car les concentrateurs sont d\u00e9sormais consid\u00e9r\u00e9s comme des p\u00e9riph\u00e9riques anciens.</p>"},{"location":"cfa/5/#534-portfast-et-protection-bpdu","title":"5.3.4 - PortFast et protection BPDU","text":"<p>L'objectif de la fonction PortFast \u00e9tant de minimiser le temps d'attente des ports d'acc\u00e8s avant la convergence Spanning Tree, elle doit \u00eatre utilis\u00e9e uniquement sur les ports d'acc\u00e8s. Si vous activez PortFast sur un port connect\u00e9 \u00e0 un autre commutateur, vous risquez de cr\u00e9er une boucle Spanning Tree. PortFast est uniquement destin\u00e9 aux ports de commutateur qui se connectent aux p\u00e9riph\u00e9riques terminaux.</p> <p>Lorsqu'un port de commutateur est configur\u00e9 avec PortFast, ce port passe de l'\u00e9tat de blocage \u00e0 l'\u00e9tat d'acheminement imm\u00e9diatement, sans passer par les autres \u00e9tats 802.1D STP habituels (\u00e9coute et apprentissage) et en \u00e9vitant un d\u00e9lai de 30 secondes. Vous pouvez utiliser PortFast sur les ports d'acc\u00e8s pour permettre aux appareils connect\u00e9s \u00e0 ces ports, tels que les clients DHCP, d'acc\u00e9der imm\u00e9diatement au r\u00e9seau, plut\u00f4t que d'attendre que le STP IEEE 802.1D converge sur chaque VLAN. </p> <p>Dans une configuration PortFast valide, les trames BPDU ne doivent jamais \u00eatre re\u00e7ues sur les ports des commutateurs activ\u00e9s par PortFast, car cela indiquerait qu'un autre pont ou commutateur est connect\u00e9 au port. Cela provoque potentiellement une boucle de spanning tree. Pour \u00e9viter ce type de sc\u00e9nario, les commutateurs Cisco prennent en charge une fonctionnalit\u00e9 appel\u00e9e Protection BPDU. Lorsqu'elle est activ\u00e9e, la protection BPDU place imm\u00e9diatement le port \u00e0 l'\u00e9tat errdisabled (erreur d\u00e9sactiv\u00e9e) lors de la r\u00e9ception d'une trame BPDU. Cela prot\u00e8ge contre les boucles potentielles en arr\u00eatant efficacement le port. La fonction de protection BPDU offre une r\u00e9ponse s\u00e9curis\u00e9e aux configurations non valides, car un administrateur doit remettre manuellement l'interface en service.</p>"},{"location":"cfa/6/","title":"6 - EtherChannel","text":""},{"location":"cfa/6/#611-agregation-de-liaisons","title":"6.1.1 - Agr\u00e9gation de liaisons","text":"<p>Il existe des sc\u00e9narios dans lesquels plus de bande passante ou de redondance entre les p\u00e9riph\u00e9riques est n\u00e9cessaire que ce qui peut \u00eatre fourni par une liaison unique. Plusieurs liens peuvent \u00eatre connect\u00e9s entre les appareils pour augmenter la bande passante. Cependant, le protocole STP (Spanning Tree Protocol), qui est activ\u00e9 sur les p\u00e9riph\u00e9riques de couche 2 tels que les commutateurs Cisco par d\u00e9faut, bloquera les liens redondants pour emp\u00eacher les boucles de commutation, comme le montre la figure.</p> <p>Une technologie d'agr\u00e9gation de liens est n\u00e9cessaire pour permettre des liaisons redondantes entre les p\u00e9riph\u00e9riques qui ne seront pas bloqu\u00e9s par STP. Cette technologie est connue sous le nom d'EtherChannel.</p> <p>EtherChannel est une technologie d'agr\u00e9gation de liens qui regroupe plusieurs liaisons Ethernet physiques en un seul lien logique. Il est utilis\u00e9 pour fournir une tol\u00e9rance aux pannes, un partage de charge, une bande passante accrue et une redondance entre les commutateurs, les routeurs et les serveurs.</p> <p>Il est \u00e9galement possible de combiner le nombre de liaisons physiques entre les commutateurs pour acc\u00e9l\u00e9rer de mani\u00e8re globale la communication entre les commutateurs.</p>"},{"location":"cfa/6/#613-avantages-de-letherchannel","title":"6.1.3 - Avantages de l'EtherChannel","text":"<ul> <li>La plupart des t\u00e2ches de configuration peuvent \u00eatre r\u00e9alis\u00e9es sur l'interface EtherChannel plut\u00f4t que sur chaque port, ce qui assure la coh\u00e9rence de la configuration sur toutes les liaisons.</li> <li>Un EtherChannel repose sur les ports de commutation existants. Il n'est pas n\u00e9cessaire de mettre \u00e0 niveau la liaison vers une connexion plus rapide et plus co\u00fbteuse pour avoir davantage de bande passante.</li> <li>L'\u00e9quilibrage de la charge se fait entre les liaisons appartenant au m\u00eame EtherChannel. En fonction de la plate-forme mat\u00e9rielle, une ou plusieurs m\u00e9thodes d'\u00e9quilibrage de la charge peuvent \u00eatre impl\u00e9ment\u00e9es. Ces m\u00e9thodes incluent l'\u00e9quilibrage de la charge entre les adresses MAC source et de destination ou entre les adresses IP source et de destination, sur les liaisons physiques.</li> <li>EtherChannel cr\u00e9e une agr\u00e9gation consid\u00e9r\u00e9e comme une seule liaison logique. Quand plusieurs groupes EtherChannel existent entre deux commutateurs, STP peut bloquer l'un des groupes pour \u00e9viter les boucles de commutation. Quand STP bloque l'une des liaisons redondantes, il bloque la totalit\u00e9 de l'EtherChannel. Cela bloque tous les ports appartenant \u00e0 cette liaison EtherChannel. Quand il existe uniquement une liaison EtherChannel, toutes les liaisons physiques de l'EtherChannel sont actives, car STP consid\u00e8re une seule liaison (logique).</li> <li>EtherChannel offre de la redondance car la liaison globale est consid\u00e9r\u00e9e comme une seule connexion logique. De plus, la perte d'un lien physique dans le canal ne cr\u00e9e pas de changement dans la topologie. Par cons\u00e9quent, un recalcul de l'arbre spanning n'est pas requis. En supposant qu'il existe au moins une liaison physique, l'EtherChannel fonctionne normalement, m\u00eame si son d\u00e9bit global diminue \u00e0 cause de la perte d'une liaison dans l'EtherChannel.</li> </ul>"},{"location":"cfa/6/#614-restrictions-dimplementation","title":"6.1.4 - Restrictions d'impl\u00e9mentation","text":"<p>EtherChannel a certaines restrictions d'impl\u00e9mentation, notamment les suivantes:</p> <ul> <li>Les types d'interfaces ne peuvent pas \u00eatre associ\u00e9s. Par exemple, le Fast Ethernet et le Gigabit Ethernet ne peuvent pas \u00eatre m\u00e9lang\u00e9s dans un seul EtherChannel.</li> <li>Actuellement, chaque EtherChannel peut \u00eatre compos\u00e9 de huit ports Ethernet maximum, configur\u00e9s pour \u00eatre compatibles. EtherChannel fournit une largeur de bande en duplex int\u00e9gral jusqu'\u00e0 800 Mbps (Fast EtherChannel) ou 8 Gbps (Gigabit EtherChannel) entre un commutateur et un autre commutateur ou h\u00f4te.</li> <li>Le commutateur Cisco Catalyst 2960 de couche 2 prend actuellement en charge jusqu'\u00e0 six canaux EtherChannels. Cependant, gr\u00e2ce au d\u00e9veloppement de nouveaux IOS et \u00e0 l'\u00e9volution des plates-formes, certaines cartes et plates-formes peuvent prendre en charge un nombre accru de ports dans une liaison EtherChannel, ainsi qu'un nombre accru de Gigabit EtherChannels.</li> <li>La configuration de chaque port du groupe EtherChannel doit \u00eatre coh\u00e9rente sur les deux p\u00e9riph\u00e9riques. Si les ports physiques sont configur\u00e9s en tant que trunks d'un c\u00f4t\u00e9, les ports physiques de l'autre c\u00f4t\u00e9 doivent \u00e9galement \u00eatre configur\u00e9s en tant que trunks avec le m\u00eame VLAN natif. En outre, tous les ports de chaque liaison EtherChannel doivent \u00eatre configur\u00e9s en tant que ports de couche 2.</li> <li>Chaque EtherChannel poss\u00e8de une interface de canal de port logique, comme le montre la figure. Une configuration appliqu\u00e9e \u00e0 l'interface de canal de port affecte toutes les interfaces physiques attribu\u00e9es \u00e0 cette interface.</li> </ul>"},{"location":"cfa/6/#616-operation-pagp","title":"6.1.6 - Op\u00e9ration PAgP","text":"<p>PAgP (prononc\u00e9 \"Pag - P\") est un protocole propri\u00e9taire de Cisco qui aide \u00e0 la cr\u00e9ation automatique de liens EtherChannel. Quand une liaison EtherChannel est configur\u00e9e gr\u00e2ce \u00e0 PAgP, des paquets PAgP sont envoy\u00e9s entre les ports compatibles EtherChannel pour n\u00e9gocier la formation d'un canal. Quand PAgP identifie des liaisons Ethernet associ\u00e9es, il groupe les liaisons dans un EtherChannel. L'EtherChannel est ensuite ajout\u00e9 \u00e0 l'arbre de spanning recouvrant comme port unique.</p> <p>S'il est activ\u00e9, PAgP g\u00e8re \u00e9galement l'EtherChannel. Les paquets PAgP sont envoy\u00e9s toutes les 30 secondes. PAgP v\u00e9rifie la coh\u00e9rence de la configuration et g\u00e8re les ajouts de liaison et les d\u00e9faillances entre deux commutateurs. Il garantit que tous les ports ont le m\u00eame type de configuration quand un EtherChannel est cr\u00e9\u00e9.</p> <p>Remarque</p> <p>Dans EtherChannel, il est obligatoire que tous les ports aient la m\u00eame vitesse, le m\u00eame r\u00e9glage duplex et les m\u00eames informations VLAN. Toute modification d'un port apr\u00e8s la cr\u00e9ation du canal modifie \u00e9galement tous les autres ports du canal.</p> <p>Les modes pour le PAgP sont les suivants :</p> <ul> <li>On - Ce mode force l'interface \u00e0 \u00e9tablir un canal sans PAgP. Les interfaces configur\u00e9es en mode On (Activ\u00e9) n'\u00e9changent pas de paquets PAgP.</li> <li>PAgP desirable - Ce mode PAgP place une interface dans un \u00e9tat de n\u00e9gociation active dans lequel l'interface initie des n\u00e9gociations avec d'autres interfaces en envoyant des paquets PAgP.</li> <li>PAgP auto - Ce mode PAgP place une interface dans un \u00e9tat de n\u00e9gociation passive dans lequel l'interface r\u00e9pond aux paquets PAgP qu'elle re\u00e7oit mais n'initie pas de n\u00e9gociation PAgP.</li> </ul>"},{"location":"cfa/6/#618-operation-lacp","title":"6.1.8 - Op\u00e9ration LACP","text":"<p>LACP fait partie d'une sp\u00e9cification IEEE (802.3ad) qui permet de regrouper plusieurs ports physiques pour former un seul canal logique. LACP permet \u00e0 un commutateur de n\u00e9gocier un paquet automatique en envoyant des paquets LACP \u00e0 l'autre commutateur. Il assure une fonction semblable \u00e0 celle de PAgP avec Cisco EtherChannel. LACP \u00e9tant une norme IEEE, il peut \u00eatre utilis\u00e9 pour faciliter les EtherChannel dans des environnements multifournisseurs. Sur les p\u00e9riph\u00e9riques Cisco, les deux protocoles sont pris en charge</p> <p>Les modes de LACP sont les suivants:</p> <ul> <li>On - Ce mode force l'interface \u00e0 \u00e9tablir un canal sans LACP. Les interfaces configur\u00e9es en mode On (Activ\u00e9) n'\u00e9changent pas de paquets LACP.</li> <li>LACP active - Ce mode LACP place un port dans un \u00e9tat actif de n\u00e9gociation. Dans cet \u00e9tat, le port entame des n\u00e9gociations avec d'autres ports en envoyant des paquets LACP.</li> <li>LACP passive - Ce mode LACP place un port dans un \u00e9tat de n\u00e9gociation passif. Dans cet \u00e9tat, le port r\u00e9pond aux paquets LACP qu'il re\u00e7oit, mais n'entame pas de n\u00e9gociation par paquet LACP.</li> </ul>"},{"location":"cfa/6/#622-exemple-de-configuration-lacp","title":"6.2.2 - Exemple de configuration LACP","text":"<pre><code>interface range FastEthernet 0/1 - 2\nchannel-group 1 mode active\nCreating a port-channel interface Port-channel 1\nexit\ninterface port-channel 1\nswitchport mode trunk\nswitchport trunk allowed vlan 1,2,20\n</code></pre>"},{"location":"cfa/6/#631-verifier-etherchannel","title":"6.3.1 - Verifier EtherChannel","text":"<pre><code>show interfaces port-channel 1\nshow etherchannel summary\nshow etherchannel port-channel\nshow interfaces f0/1 etherchannel\n</code></pre>"},{"location":"cfa/7/","title":"7 - DHCPv4","text":""},{"location":"cfa/7/#713-etapes-a-suivre-pour-obtenir-un-bail","title":"7.1.3 - \u00c9tapes \u00e0 suivre pour obtenir un bail","text":"<ol> <li>D\u00e9tection DHCP (DHCPDISCOVER)</li> <li>Offre DHCP (DHCPOFFER)</li> <li>Requ\u00eate DHCP (DHCPREQUEST)</li> <li>Accus\u00e9 de r\u00e9ception DHCP (DHCPACK)</li> </ol>"},{"location":"cfa/7/#714-etapes-a-suivre-pour-renouveler-un-bail","title":"7.1.4 - \u00c9tapes \u00e0 suivre pour renouveler un bail","text":"<ol> <li>Requ\u00eate DHCP (DHCPREQUEST)</li> <li>Accus\u00e9 de r\u00e9ception DHCP (DHCPACK)</li> </ol>"},{"location":"cfa/7/#723-exemple-de-configuration","title":"7.2.3 - Exemple de configuration","text":"<pre><code>ip dhcp excluded-address 192.168.10.1 192.168.10.9\nip dhcp excluded-address 192.168.10.254\nip dhcp pool LAN-POOL-1\nnetwork 192.168.10.0 255.255.255.0\ndefault-router 192.168.10.1\ndns-server 192.168.11.5\ndomain-name example.com\nend\n</code></pre>"},{"location":"cfa/7/#724-commandes-de-verification-dhcpv4","title":"7.2.4 - Commandes de v\u00e9rification DHCPv4","text":"<pre><code>show running-config | section dhcp\nshow ip dhcp binding\nshow ip dhcp server statistics\n</code></pre>"},{"location":"cfa/7/#727-desactiver-le-serveur-cisco-ios-dhcpv4","title":"7.2.7 - D\u00e9sactiver le serveur Cisco IOS DHCPv4","text":"<pre><code>no service dhcp\nservice dhcp\n</code></pre>"},{"location":"cfa/7/#728-dhcpv4-relay","title":"7.2.8 - DHCPv4 Relay","text":"<p>Dans un r\u00e9seau hi\u00e9rarchique complexe, les serveurs d'entreprise sont g\u00e9n\u00e9ralement situ\u00e9s au niveau central. Ces serveurs peuvent fournir au r\u00e9seau des services DHCP, DNS, TFTP et FTP. Les clients du r\u00e9seau ne sont g\u00e9n\u00e9ralement pas sur le m\u00eame sous-r\u00e9seau que ces serveurs. Afin de localiser les serveurs et de b\u00e9n\u00e9ficier des services, les clients utilisent souvent des messages de diffusion.</p> Sur le Windows cherchant le DHCP<pre><code>ip helper-address &lt;address&gt;\n</code></pre> <p>Cela entra\u00eenera le routeur a l'addresse renseign\u00e9e \u00e0 relayer les diffusions DHCPv4 vers le serveur DHCPv4.</p>"},{"location":"cfa/7/#731-routeur-cisco-en-tant-que-client-dhcpv4","title":"7.3.1 - Routeur Cisco en tant que client DHCPv4","text":"<p>Il existe des sc\u00e9narios dans lesquels vous pourriez avoir acc\u00e8s \u00e0 un serveur DHCP via votre fournisseur de services Internet. Dans ces cas, vous pouvez configurer un routeur Cisco IOS en tant que client DHCPv4.</p>"},{"location":"cfa/7/#732-exemple-de-configuration","title":"7.3.2 - Exemple de configuration","text":"<pre><code>interface G0/0/1\nip address dhcp\nno shutdown\n</code></pre>"},{"location":"cfa/8/","title":"8 - SLAAC et DHCPv6","text":""},{"location":"cfa/8/#811-configuration-des-hotes-ipv6","title":"8.1.1 - Configuration des h\u00f4tes IPv6","text":"<p>Tout d'abord. Pour utiliser la configuration automatique d'adresses sans \u00e9tat (SLAAC) ou DHCPv6, vous devez consulter les adresses de monodiffusion globale (GUA) et les adresses locales de liaison (LLA). Cette rubrique couvre les deux.</p> <p>Sur un routeur, une adresse de monodiffusion globale (GUA) IPv6 est configur\u00e9e manuellement \u00e0 l'aide de la commande de configuration ipv6 address ipv6-address/prefix-length interface.</p> <p>Un h\u00f4te Windows peut \u00e9galement \u00eatre configur\u00e9 manuellement avec une configuration d'adresse GUA IPv6.</p>"},{"location":"cfa/8/#813-attribution-de-gua-ipv6","title":"8.1.3 - Attribution de GUA IPv6","text":"<p>IPv6 a \u00e9t\u00e9 con\u00e7u pour simplifier la fa\u00e7on dont un h\u00f4te peut acqu\u00e9rir sa configuration IPv6. Par d\u00e9faut, un routeur compatible IPv6 annonce ses informations IPv6. Cela permet \u00e0 un h\u00f4te de cr\u00e9er ou d'acqu\u00e9rir dynamiquement sa configuration IPv6.</p> <p>La GUA IPv6 peut \u00eatre affect\u00e9e dynamiquement \u00e0 l'aide de services sans \u00e9tat et avec \u00e9tat, comme le montre la figure.</p> <p>Toutes les m\u00e9thodes sans \u00e9tat et avec \u00e9tat dans ce module utilisent des messages RA ICMPv6 pour sugg\u00e9rer \u00e0 l'h\u00f4te comment cr\u00e9er ou acqu\u00e9rir sa configuration IPv6. Bien que les syst\u00e8mes d'exploitation h\u00f4tes suivent la suggestion de RA, la d\u00e9cision r\u00e9elle revient finalement \u00e0 l'h\u00f4te.</p> <p> </p>"},{"location":"cfa/8/#814-trois-indicateurs-de-message-ra","title":"8.1.4 - Trois indicateurs de message RA","text":"<p>La d\u00e9cision de la fa\u00e7on dont un client obtiendra une GUA IPv6 d\u00e9pend des param\u00e8tres du message RA.</p> <p>Un message RA ICMPv6 comprend trois indicateurs permettant d'identifier les options dynamiques disponibles pour un h\u00f4te, comme suit:</p> <ul> <li>Indicateur A - Il s'agit de l'indicateur Address Autoconfiguration. Utilisez l'autoconfiguration des adresses sans \u00e9tat (SLAAC) pour cr\u00e9er un GUA IPv6.</li> <li>Indicateur O - Il s'agit de l'indicateur Autre configuration. D'autres informations sont disponibles \u00e0 partir d'un serveur DHCPv6 sans \u00e9tat.</li> <li>Indicateur M - Il s'agit de l'indicateur de configuration des adresses g\u00e9r\u00e9es. Utilisez un serveur DHCPv6 avec \u00e9tat pour obtenir une GUA IPv6.</li> </ul> <p>En utilisant diff\u00e9rentes combinaisons des indicateurs A, O et M, les messages RA informent l'h\u00f4te des options dynamiques disponibles.</p>"},{"location":"cfa/8/#821-apercu-de-slaac","title":"8.2.1 - Aper\u00e7u de SLAAC","text":"<p>Tous les r\u00e9seaux n'ont pas acc\u00e8s \u00e0 un serveur DHCPv6. Mais chaque p\u00e9riph\u00e9rique d'un r\u00e9seau IPv6 a besoin d'une GUA. La m\u00e9thode SLAAC permet aux h\u00f4tes de cr\u00e9er leur propre adresse de monodiffusion globale IPv6 unique sans les services d'un serveur DHCPv6.</p> <p>SLAAC est un service sans \u00e9tat. Cela signifie qu'il n'y a pas de serveur qui conserve les informations d'adresse r\u00e9seau pour savoir quelles adresses IPv6 sont utilis\u00e9es et lesquelles sont disponibles.</p> <p>Le SLAAC utilise les messages RA ICMPv6 pour fournir l'adressage et d'autres informations de configuration qui seraient normalement fournies par un serveur DHCP. Un h\u00f4te configure son adresse IPv6 en fonction des informations envoy\u00e9es dans le RA. Les messages RA sont envoy\u00e9s par un routeur IPv6 toutes les 200 secondes.</p> <p>Un h\u00f4te peut \u00e9galement envoyer un message de sollicitation du routeur (RS) demandant qu'un routeur compatible IPv6 envoie un RA \u00e0 l'h\u00f4te.</p> <p>SLAAC peut \u00eatre d\u00e9ploy\u00e9 en tant que SLAAC uniquement, ou SLAAC avec DHCPv6.</p>"},{"location":"cfa/8/#822-activation-de-la-slaac","title":"8.2.2 - Activation de la SLAAC","text":"<pre><code>conf t\nipv6 unicast-routing\n</code></pre> <p>V\u00e9rification d'activation:</p> <pre><code>show ipv6 interface G0/0/1 | section Joined\n</code></pre>"},{"location":"cfa/8/#823-methode-slaac-uniquement","title":"8.2.3 - M\u00e9thode SLAAC uniquement","text":"<p>La m\u00e9thode SLAAC uniquement est activ\u00e9e par d\u00e9faut lorsque la commande ipv6 unicast-routing est configur\u00e9e. Toutes les interfaces Ethernet activ\u00e9es avec une GUA IPv6 configur\u00e9e commenceront \u00e0 envoyer des messages RA avec l'indicateur A d\u00e9fini sur 1, et les indicateurs O et M d\u00e9finis sur 0.</p>"},{"location":"cfa/ccna1/","title":"CCNA 1","text":"<p>MAJ le 30/09/2022</p>"},{"location":"cfa/ccna1/#rappels-cisco","title":"Rappels Cisco","text":"<p>Modes de commande</p> Mode Acc\u00e8s Description Utilisateur Mode de base. Il sert \u00e0 rien. Privil\u00e9gi\u00e9 <code>en</code> Permet de sauvegarder la conf et de passer dans les autres modes. Configuration globale <code>conf t</code> Permet de faire la plupart des actions de configuration globale Configuration de ligne <code>line [interface] [n]</code> Permet de configurer les ports console, aux, telnet et SSH Configuration d'iterface <code>int [interface]</code> Permet de configurer les interfaces r\u00e9seau. Configuration des mots de passe<pre><code>en\nconf t\nhostname S2\nline console 0\npassword [mot de passe]\nlogin\nexit\nenable password [mot de passe]\nenable secret [secret]\nservice password-encryption\n</code></pre> Bani\u00e8re MOTD<pre><code>en\nconf t\nbanner motd \"This is a secure system. Authorized Access Only!\"\n</code></pre> Travail avec les configurations<pre><code>en\nsh run\nsh start\nwr\n</code></pre> Interface virtuelle<pre><code>en\nconf t\nint vlan 1\nip address [ip] [masque]\nno shut\n</code></pre>"},{"location":"cfa/secu/","title":"S\u00e9curit\u00e9","text":"<p>MAJ le 26/10/2022</p>"},{"location":"cfa/secu/#securite-linux","title":"S\u00e9curit\u00e9 linux","text":"<p>Rappel: J'utilise une distribution Bullseye. Les informations de cette page peuvent diff\u00e9rer pour d'autres distributions.</p>"},{"location":"cfa/secu/#bidouillages-de-base","title":"Bidouillages de base","text":"<p>Ex\u00e9cuter une commande d\u00e9j\u00e0 utilis\u00e9e</p> <p><code>!num\u00e9ro</code></p> <p>Affichage d'un fichier zipp\u00e9</p> <p>On peut utiliser <code>zdcat</code>!</p> <p>Redirection de la sortie</p> <p>On peut rediriger la sortie d'un programme vers l'entr\u00e9e d'un autre en utilisant <code>|</code>. Par exemple: <code>cat fichier | grep recherche</code> redirige la sortie de <code>cat</code> vers <code>grep</code>.</p>"},{"location":"cfa/secu/#outils-de-recherche","title":"Outils de recherche","text":"<ul> <li>Awk permet de chercher des chaines gr\u00e2ce \u00e0 un langage presque aussi puissant que le C.<ul> <li>Utilisation `awk -F \"s\u00e9parateur\" -v variable</li> </ul> </li> </ul> <p>Outils de recherche</p> <ul> <li><code>awk</code></li> <li><code>find</code></li> <li><code>grep</code></li> </ul> <p>Commandes sur les fichiers</p> <ul> <li>Compter: <code>wc</code></li> <li>Comparaison: <code>diff</code></li> <li>Int\u00e9grit\u00e9: <code>md5sum</code></li> <li>Tri: <code>sort</code>  et <code>unikq</code></li> </ul> <p>Exemples</p> <pre><code>cat /var/log/syslog | grep 185.125.190.58 |  awk '{print $1 \" \" $2 }' | uniq\ngrep -E -o \"([0-9]{1,3}[.]){3}[0-9]{1,3}\" /var/log/syslog\ncat /var/log/syslog | grep -E \"([0-9]{1,3}[.]){3}[0-9]{1,3}\" |  awk '{print $1 \" \" $2 }' | uniq\n</code></pre> <p>Outils de conversion</p> <ul> <li><code>Tr</code></li> <li><code>Sed</code> (regex) permet de remplacer du texte</li> <li><code>$[]; $(())</code> (calcul)</li> </ul> <p>Outils d'archive et de compression</p> <ul> <li>Archive<ul> <li><code>zip</code></li> <li><code>tar</code></li> </ul> </li> <li>Compression<ul> <li><code>gzip</code></li> <li><code>bzip2</code></li> </ul> </li> </ul> <p>Liens</p> <ul> <li>Lien physique: <code>ln document lien</code></li> <li>Lien symbolique: <code>ln -s document lien</code></li> </ul> <p>Shells</p> <ul> <li>V\u00e9rification des shells:<ul> <li><code>/etc/shells</code></li> <li><code>/bin/*sh</code></li> </ul> </li> <li>V\u00e9rification du shell utilis\u00e9<ul> <li><code>ps</code></li> <li><code>$0</code></li> <li><code>$SHELL</code></li> </ul> </li> </ul> <p>V\u00e9rification de la distrib</p> <ul> <li>Red-Hat:<ul> <li><code>/etc/lsb-release</code></li> <li><code>/etc/redhat-release</code></li> </ul> </li> <li>Debian:<ul> <li><code>/etc/issue</code></li> <li><code>/etc/debian_version/bin/*sh</code></li> </ul> </li> </ul> <p>Commandes: <pre><code>lsb_release -a\nlsb_release -ds\nuname -a\n</code></pre></p> <p>Permissions</p> <ul> <li><code>useradd</code></li> <li><code>usermod</code></li> <li><code>passwd</code></li> <li><code>userdel</code></li> <li><code>groupadd</code></li> <li><code>groupmod</code></li> <li><code>groupdel</code></li> <li><code>gpasswd</code></li> <li><code>groups</code></li> <li><code>newgrp</code></li> <li><code>chmod</code></li> <li><code>chown</code></li> <li><code>chgrp</code></li> <li><code>unmask</code></li> </ul>"},{"location":"cfa/secu/#pam","title":"PAM","text":"<p>Pluguable Auth Module <pre><code>apt install libpam-google-autghenticator\nvim /etc/pam.d/common-auth\n    auth required pam_google_authenticator.so\ngoogle-authenticator\n</code></pre></p> <p>stdin1 = clavier stdout1 = ecran stdout2 = erreur, \u00e9cran</p> <p>On peut mettre 1 ou 2 devant \"&gt;\" pour rediriger la sortie vers quelque part (/dev/null ou un fichier par exemple)</p> <p>ecraser fichier &gt; ajouter au fichier &gt;&gt; Mettre en entr\u00e9e &lt; stdout 2&gt; stdout + stderr &amp;&gt; stderr sur stdput 2&gt;&amp;1</p> <p>combinaisons possibles</p> <p>tee permet de lire stdin et \u00e9crire dans plusieures sorties ex: tail /var/log/syslog | tee fichier.txt</p> <p>programme daemon processus thread script fonction service application</p> <p>top pour voir les processus top -U tim</p>"},{"location":"cfa/secu/#gestion-des-processus","title":"Gestion des processus","text":"<p>arriere plan: &amp;. Nohup pour pas que la commande cr\u00e8ve avec le bash mettre en pause: ctfr Z passer en background: bg frontground: fg jobs ps pstree free top fuser sdparm hdparm lsof sar iostat mpstat pidstat vmstat</p> <p>recharger conf: sighup arret brutal sigkill terminer gentiement</p> <p>cr\u00e9er zombie: (sleep 1 &amp; exec /bin/sleep 100)&amp;</p> <p>priorit\u00e9 d'acc\u00e8s au processeur: nice pour lancer avec une prio custom et renice pour red\u00e9finir plus tard 0 par d\u00e9faut, -20 est tr\u00e8s m\u00e9chant et 19 est tr\u00e8s gentil</p> <p>exec permet de remplacer le bash par le processus qu'on lance</p>"},{"location":"cfa/secu/#execution","title":"Ex\u00e9cution","text":"<p>|| ex\u00e9cuter la commande 2 si la 1 est morte &amp;&amp; ex\u00e9cuter la commande 2 si la 1 est morte (?)</p>"},{"location":"cfa/secu/#variables-denvironnement","title":"Variables d'environnement","text":"<p>HOME: r\u00e9pertoire utilisateur PWD: r\u00e9pertoire courant PATH: chemins d'acc\u00e8s aux ex\u00e9cutables SHELL: shell utilis\" pour la connexion ...</p>"},{"location":"cfa/secu/#materiel","title":"Mat\u00e9riel","text":"<p>processeur:  - /proc/cpuinfo  - lscpu Ram:  - /proc/meminfo  - free stockage:  - /dev/sd[a-z][1-9]  - /dev/fd[0, 1]  - /dev/hd* et /dev/sr0  - /dev/</p>"},{"location":"cfa/secu/#partitions-et-systemes-de-fichier","title":"Partitions et syst\u00e8mes de fichier","text":"<p>Pas de getion de droit d'acc\u00e8s chez Windows</p>"},{"location":"cfa/secu/#ajoutr-dun-disque","title":"Ajoutr d'un disque","text":"<p>lsblk fdisk /dev/sdb n p 1 enter enter w mkfs -t ext4 /dev/sdb1 mount -t ext4 /dev/sdb1 /home/tim/test lsblk -fe 7 dans /etc/fstab: UUID=eabce7c2-7ad9-42f9-a6cf-2a0bc99e1bbe /home/tim/test ext4 defaults 0 2</p> <p>umount /dev/sdb1 sudo shred -v -n 1 /dev/sdb apt install cryptsetup cryptsetup luksFormat /dev/sdb cryptsetup --type luks open /dev/sdb victor mkfs -t ext4 /dev/mapper/victor cryptsetup luksDump /dev/sdb mount -v /dev/mapper/victor   /home/victor/TEST cryptsetup status victor cryptsetup close victor cryptsetup --type luks open /dev/sdb victor</p> <p>editer /etc/crypttab victor /dev/sdb none luks</p> <p>editer /etc/fstab UUID=b7e4c3f1-402f-4f34-83bf-db69369dd30b /home/victor/TEST ext4 defaults 0 2</p>"},{"location":"cfa/secu/#sequence-damorcage-bas-niveau","title":"S\u00e9quence d'amorcage bas niveau","text":"<p>bios: Post detection matos recherche sectgeur amorcage chargeur d'amorcage: mbr grub stage 2 kernel: Initrd ramfs d\u00e9tection matos montaged /</p> Pour bypass qqe chose en cas de pepin<pre><code>Maintenir la touche Shift enfonc\u00e9 au d\u00e9marrage de la machine\nPress\u00e9 \u00ab e \u00bb\nYou need to modify it or change it from \u201cread-only\u201d mode to \u201cread-write\u201d mode. Find the line beginning with \u201cLinux.\u201d Look for ro and change it to rw. Add init=/bin/bash at the end of the line, attention au clavier anglaise \u00e9hh\u00e9\nF10\nd\u00e9marrer\nMount \u2013n \u2013 o remount,rw /\nMonter le syst\u00e9me defichier de la racine\nPasswd root\nReinitialize de root\nPasswd victor\nR\u00e9initialise le password de l\u2019utilisateur Victor\nExec /sbin/init\nSort du shell et reboot\n</code></pre> <p>https://memo-linux.com/securiser-lacces-et-le-demarrage-du-grub-par-mot-de-passe/</p> <p>grub: /etc/default/grub</p>"},{"location":"cfa/secu/#scripting-bash","title":"Scripting bash","text":""},{"location":"cfa/secu/#binbash","title":"!/bin/bash","text":"<p>echo \"premiere var \" $1 echo \"commande passe \" $0 echo \"all var \" $@ echo \"nombre d'argument \" $#</p> <p>$0 : nom de la commande $n : argument n $# : nombre d\u2019argument $* : valeur des arguments $@ : tablleau</p> <p>$? : code retour $$ : pid shell variable=$(commande)</p>"},{"location":"cfa/secu/#sites-de-doc","title":"Sites de doc","text":"<p>tldp.org abs.traduc.org</p>"},{"location":"uni/maths/","title":"Maths","text":"exercice2-3.c<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\nchar nom[12][9] = {\"Janvier\", \"Fevrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\", \"Juillet\", \"Aout\", \"Septembre\", \"Octobre\", \"Novembre\", \"Decembre\"};\nint jour[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};\nint numero;\nprintf(\"Entrez un numero de mois compris entre 1 et 12: \");\ndo\n{\nscanf(\"%d\", &amp;numero);\n} while (numero &lt; 1 || numero &gt; 12);\nnumero -= 1;\nprintf(\"Le mois que vous avez selectionne est %s. Il contient %d jours.\", nom[numero], jour[numero]);\nreturn 0;\n}\n</code></pre>"},{"location":"uni/maths/#td-2","title":"TD 2","text":"exercice1.c<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nint quantite;\nprintf(\"Entrez la quantite de barres que vous voudriez voir: \");\nscanf(\"%d\", &amp;quantite);\nprintf(\"Version 1: \\n\");\nfor (int i = 0; i &lt; quantite; i++)\n{\nprintf(\"-\");\n}\nprintf(\"\\nVersion 2: \\n\");\nfor (int i = 0; i &lt; quantite; i++)\n{\nprintf(\"-\");\n}\nprintf(\"\\n\");\nfor (int i = 0; i &lt; quantite; i++)\n{\nprintf(\"-\");\n}\nprintf(\"\\nVersion 3: \\n\");\nfor (int i = 0; i &lt; quantite; i++)\n{\nprintf(\"-\\n\");\n}\nreturn 0;\n}\n</code></pre> exercice2.c<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nint max;\nprintf(\"Entrez la quantite: \");\nscanf(\"%d\", &amp;max);\nfor (int i = 1; i &lt;= max; i++)\n{\nfor (int j = 1; j &lt;= i; j++)\n{\nprintf(\"%d\", j);\n}\nprintf(\"\\n\");\n}\nreturn 0;\n}\n</code></pre> exercice3.c<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nfor (int i = 10; i &lt;= 100; i++)\n{\nprintf(\"%d: %d - %d\\n\", i, i * i, i * i * i);\n}\nreturn 0;\n}\n</code></pre> exercice4.c<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nint nombre;\nprintf(\"Entrez n: \");\nscanf(\"%d\", &amp;nombre);\nif (nombre % 2)\n{\nprintf(\"Ce nombre est impair.\");\n}\nelse\n{\nprintf(\"Ce ombre est pair.\");\n}\nreturn 0;\n}\n</code></pre> exercice5.c<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint main()\n{\nfloat nombre;\nprintf(\"Entrez un nombre: \");\nscanf(\"%f\", &amp;nombre);\nif (nombre &lt; 0)\n{\nprintf(\"Impossible de calcler la racine d'un nombre negatif.\");\n}\nelse\n{\nprintf(\"La racine de %f est %f.\", nombre, sqrt(nombre));\n}\nreturn 0;\n}\n</code></pre> exercice6.c<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\nint main()\n{\nfloat x;\nint n;\nprintf(\"Choisissez un nombre: \");\nscanf(\"%f\", &amp;x);\nprintf(\"Choixissez un n: \");\nscanf(\"%d\", &amp;n);\nfor (int i = 1; i &lt;= n; i++)\n{\nfloat temp = pow(x, i);\nprintf(\"%f \", temp);\n}\nreturn 0;\n}\n</code></pre> exercice7.c<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nfloat nombre;\nint n;\nfloat somme = 0;\nprintf(\"Entrez un nombre: \");\nscanf(\"%f\", &amp;nombre);\nprintf(\"Entrez n: \");\nscanf(\"%d\", &amp;n);\nfor (int i = 1; i &lt;= n; i++)\n{\nsomme += nombre / (2 * i);\n}\nprintf(\"La somme est: %f.\", somme);\nreturn 0;\n}\n</code></pre>"},{"location":"uni/maths/#td3","title":"TD3","text":"exercice1.c<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\nconst float pi = 3.141592;\nfloat aireCercle(float rayon)\n{\nfloat aire = pi * pow(rayon, 2);\nreturn aire;\n}\nfloat circonferenceCercle(float rayon)\n{\nfloat circonference = circonference = 2 * pi * rayon;\nreturn circonference;\n}\nfloat aireRectangle(float longueur, float largeur)\n{\nfloat aire = longueur * largeur;\nreturn aire;\n}\nfloat circonferenceRectangle(float longueur, float largeur)\n{\nfloat circonference = 2 * (longueur = largeur);\nreturn circonference;\n}\nint main(int argc, char **argv)\n{\nfloat aire, circonference;\nif (argc == 2)\n{\naire = aireCercle((atof(argv[1])));\ncirconference = circonferenceCercle(atof(argv[1]));\n}\nelse\n{\naire = aireRectangle(atof(argv[1]), atof(argv[2]));\ncirconference = circonferenceRectangle(atof(argv[1]), atof(argv[2]));\n}\nprintf(\"Aire: %f\\nCirconf\u00e9rence: %f\", aire, circonference);\nreturn 0;\n}\n</code></pre>"},{"location":"uni/reseau/","title":"R\u00e9seau","text":"<p>MAJ le 14/09/2022 \u00e0 17h30</p>"},{"location":"uni/reseau/#cours-de-reseaux","title":"Cours de r\u00e9seaux","text":"<p>OS utilis\u00e9</p> <p>Tout ce qui suit est fait sous Debian Bullseye en VM.</p> <p>Configuration de la VM</p> <p>Il faut configurer la VM en mode \"bridge\" pour faire les TDs en LAN.</p> <p>Si tu utilises VirtualBox il faut:</p> <ul> <li>Aller dans la config de la VM,</li> <li>Aller dans <code>R\u00e9seau</code>,</li> <li>Pour l'interface qui sera utilis\u00e9 pour communiquer avec la LAN, chosir \"Mode d'acc\u00e8s r\u00e9seau:\" <code>Bridge</code> ou <code>Acc\u00e8s par pont</code>.</li> </ul>"},{"location":"uni/reseau/#td1","title":"TD1","text":""},{"location":"uni/reseau/#exercice-2","title":"Exercice 2","text":"/etc/network/interfaces<pre><code># This file describes the network interfaces available on your system\n# and how to activate them. For more information, see interfaces(5).\nsource /etc/network/interfaces.d/\n\n# The loopback network interface\nauto lo\niface lo inet loopback\n\nauto enp0s3\niface enp0s3 inet static\n    address 192.168.42.69\n    netmask 255.255.255.0\n#iface enp0s3 inet dhcp # (1)\n</code></pre> <ol> <li>Commenter le paragraphe pr\u00e9c\u00e9dent et d\u00e9commenter cette ligne pour retourner en DHCP rapidement!</li> </ol> <p>Clique sur les \" + \" pour plus d'explications</p> <p>Il y en a un \u00e0 la derni\u00e8re ligne du bloc pr\u00e9c\u00e9dent.</p> <pre><code>systemctrl restart networking\n</code></pre> Si le r\u00e9seau ne fonctionne pas <ul> <li>V\u00e9rifie avec <code>ip a</code> que la carte est UP,<ul> <li>Si elle est down, <code>ifup enp0s3</code></li> </ul> </li> <li>Parfois, il faut rebooter l'ordi.</li> </ul> <pre><code>apt install net-tools\nnetstat -in\n</code></pre> <p>Sur une VM Debian vierge, on voit:</p> <ul> <li><code>enp0s3</code>: carte r\u00e9seau de la machine. Aucune erreur de chaque type.</li> <li><code>lo</code>: boucle virtuelle sur soi-m\u00eame. Aucune erreur de chaque type.</li> </ul>"},{"location":"uni/reseau/#exercice-3","title":"Exercice 3","text":"<p>Configuration p\u00e9renne faite \u00e0 l'exercice 2.</p>"},{"location":"uni/reseau/#exercice-4","title":"Exercice 4","text":"<pre><code>ping 192.168.42.n\n</code></pre>"},{"location":"uni/reseau/#exercice-5","title":"Exercice 5","text":""},{"location":"uni/reseau/#partie-1","title":"Partie 1","text":"<pre><code>arp\nAdresse                  TypeMap AdresseMat          Indicateurs           Iface\n_gateway                 ether   52:54:00:12:35:02   C                     enp0s3\n</code></pre>"},{"location":"uni/reseau/#partie-2","title":"Partie 2","text":"<pre><code>ip neigh flush all\n</code></pre>"},{"location":"uni/reseau/#partie-3","title":"Partie 3","text":"<pre><code>ping 192.168.42.n\narp\n</code></pre>"},{"location":"uni/reseau/#exercice-6","title":"Exercice 6","text":"<pre><code>apt instal tcpdump\ntcpdump\n</code></pre> <p>Dans un autre terminal: <pre><code>ifconfig\n</code></pre></p> <p>Chez moi, la carte reste en MULTICAST</p> <p>D'apr\u00e8s l'aide du programme, elle devrait \u00eatre en PROMISC</p>"},{"location":"uni/reseau/#exercice-7","title":"Exercice 7","text":"<p>Obsol\u00e8te - pr\u00e9f\u00e9rer WireShark</p>"},{"location":"uni/reseau/#exercice-8","title":"Exercice 8","text":"<p>Le changement par rapport au hub est qu'on ne voit que les paquets qui sont destin\u00e9s \u00e0 notre h\u00f4te.</p>"},{"location":"uni/reseau/#exercice-9","title":"Exercice 9","text":"<pre><code>ping 192.168.42.255\n</code></pre>"},{"location":"uni/reseau/#td2","title":"TD2","text":""},{"location":"uni/reseau/#exercice-2_1","title":"Exercice 2","text":"/etc/network/interfaces<pre><code># This file describes the network interfaces available on your system\n# and how to activate them. For more information, see interfaces(5).\nsource /etc/network/interfaces.d/*\n\n# The loopback network interface\nauto lo\niface lo inet loopback\n\nauto enp0s3\niface enp0s3 inet static\n    address 192.168.1.9/28\n    gateway 192.168.1.62 # (1)\n#iface enp0s3 inet dhcp\n</code></pre> <ol> <li>N\u00e9cessaire pour pouvoir communiquer avec d'autres r\u00e9seaux</li> </ol> <pre><code>systemctl restart networking.service\n</code></pre>"},{"location":"uni/reseau/#exercice-3_1","title":"Exercice 3","text":"<pre><code>netstat -rn\n</code></pre> <p>On en d\u00e9duit que les paquets ne doivent effectuer aucun saut pour atteindre une addresse du m\u00eame sous-r\u00e9seau.</p>"},{"location":"uni/reseau/#exercice-4_1","title":"Exercice 4","text":"<p>Je n'ai pas fait cette partie</p> <p>Faudrait v\u00e9rifier l'exactitude des commandes.</p> Sur le routeur<pre><code>conf t\nrouter rip\nnetwork 192.168.1.0\nnetwork 192.168.2.2\naccess-list 1 permit any any any # (1)\nend\nwr\n</code></pre> <ol> <li>Par d\u00e9faut, une ACL implicite interdit tous les clients.</li> </ol>"},{"location":"uni/reseau/#exercice-5_1","title":"Exercice 5","text":""},{"location":"uni/reseau/#partie-1_1","title":"Partie 1","text":"<p>Il s'aigit de la derni\u00e8re adresse du r\u00e9seau.</p>"},{"location":"uni/reseau/#partie-2_1","title":"Partie 2","text":"<pre><code>ping 192.168.1.63\n</code></pre> <p>Il semblerait que la passerelle bloque les r\u00e9ponses ou les requ\u00eates car c'est la seule a r\u00e9pondre.</p>"},{"location":"uni/reseau/#exercice-6_1","title":"Exercice 6","text":"<p>Les deux sous-r\u00e9seaux \u00e9tant identiques, il serait logique de scinder la plage disponible en deux parts \u00e9gales gr\u00e2ce \u00e0 un masque \u00e0 25 bits.</p>"},{"location":"uni/reseau/#partie-1_2","title":"Partie 1","text":"<p>La configuration est bas\u00e9e sur l'exercice 2.</p>"},{"location":"uni/reseau/#partie-2_2","title":"Partie 2","text":"<p>La configuration est bas\u00e9e sur l'exercice 4.</p>"},{"location":"uni/reseau/#exercice-7_1","title":"Exercice 7","text":"<p>Voir exercice 5.</p>"},{"location":"uni/reseau/#exercice-8_1","title":"Exercice 8","text":"<p>A compl\u00e9ter</p>"},{"location":"uni/reseau/#td3","title":"TD3","text":""},{"location":"uni/reseau/#exercice-2_2","title":"Exercice 2","text":"<pre><code>ip route flush all\nip route show\nip route add 192.168.1.62 dev enp0s3\nip route add default via 192.168.1.62 dev enp0s3\nip route show\n</code></pre> <p>Compl\u00e9ter avec WireShark.</p>"},{"location":"uni/reseau/#exercice-3_2","title":"Exercice 3","text":"<p>Le temps de r\u00e9ponse est plus grand quand on envoie une requ\u00eate ping vers un r\u00e9seau externe. Ceci est d\u00fb au saut suppl\u00e9mentaire caus\u00e9 par l'ajout du routeur dans le processus de requ\u00eate.</p>"},{"location":"uni/reseau/#exercice-4_2","title":"Exercice 4","text":"<pre><code>netstat -an\n</code></pre> <p>pour une Debian vierge, seul <code>tcp 127.0.0.1:631</code> apparait. D'apr\u00e8s /etc/services, ceci correspond au Intrnet Printing Protocol.</p>"},{"location":"uni/reseau/#exercice-5_2","title":"Exercice 5","text":"<pre><code>apt install rwho\nrwho -a\n</code></pre> <p>Analyse des trames \u00e0 compl\u00e9ter.</p>"},{"location":"uni/reseau/#exercice-6_2","title":"Exercice 6","text":"<p>Telnet utilise le port 23.</p>"},{"location":"uni/reseau/#exercice-7_2","title":"Exercice 7","text":"<p>A compl\u00e9ter.</p>"},{"location":"uni/reseau/#td4","title":"TD4","text":"<p><code>iptables</code> est obsol\u00e8te et Netfilter d\u00e9conseille de l'utiliser.</p> <p>J'ai fait un memo sur la page misc avec principe, commandes et modules!</p>"},{"location":"uni/reseau/#prise-en-main","title":"Prise en main","text":"<p>Supprimer la r\u00e8gle d'une chaine:</p> <pre><code>iptables -D [chaine] [r\u00e8gle]\n</code></pre> <p>Supprimer toutes les r\u00e8gles d'une chaine:</p> <pre><code>iptables -F [chaine]\n</code></pre> <p>Supprimer une chaine:</p> <pre><code>iptables -X [chaine] # (1)\n</code></pre> <ol> <li>Attention, on ne peut pas supprimer les \"chaines originales\" (INPUT, FORWARD, OUTPUT etc).</li> </ol> <p>Je n'ai pas de machine RedHat, et <code>iptables</code> n'a pas de fichier de configuration.</p> <p>Le contenu de <code>/etc/sysconfig/iptable</code> restera donc un myst\u00e8re.</p> <p><code>iptables</code>n'est pas reconnu en tant que service, donc la commande <code>service iptables</code> ne passera pas, mais la commande suivante est d\u00e9j\u00e0 tr\u00e8s informative:</p> <pre><code>iptables --help\n</code></pre> <p>On peut aussi regarder le man si on l'a t\u00e9l\u00e9charg\u00e9.</p>"},{"location":"uni/reseau/#filtrage-de-ports","title":"Filtrage de ports","text":"<p>Cette section n'a pas \u00e9t\u00e9 v\u00e9rifi\u00e9e.</p> <pre><code>iptables -A INPUT -p tcp --dport 22 -J DROP\niptables -I INPUT -p tcp --dport 22 -s n.n.n.n -J ACCEPT # (1)\niptables -F\niptables -N ssh\niptables -A INPUT -p tcp --dport 22 -J ssh\niptables -A ssh -s n.n.n.n -J ACCEPT\niptables -A ssh -J DROP\n</code></pre> <ol> <li><code>-I</code> permet de placer la r\u00e8gle en haut de l'ordre d'ex\u00e9cution.</li> </ol>"},{"location":"uni/reseau/#exercice-1","title":"Exercice 1","text":"<pre><code>iptables -A INPUT -p tcp --dport 22 -s n.n.n.n -J ACCEPT\niptables -A INPUT -p tcp --dport 25 -s n.n.n.n -J ACCEPT\niptables -A INPUT -p tcp --dport 22 -J LOG \"SSH interdit\"\niptables -A INPUT -J DROP\n</code></pre>"},{"location":"uni/reseau/#exercice-2_3","title":"Exercice 2","text":"<pre><code>iptables -A OUTPUT -p all --dport 80 -J DROP\niptables -A OUTPUT -p all --dport 443 -J DROP\n</code></pre> <p>Affin de trier les utilisateurs, on doit utiliser le module <code>owner</code>:</p> <pre><code>iptables -I OUTPUT -p all --dport 80 -m owner --uid-owner root -J ACCEPT\niptables -I OUTPUT -p all --dport 443 -m owner --uid-owner root -J ACCEPT\n</code></pre>"},{"location":"uni/reseau/#exercice-3_3","title":"Exercice 3","text":"<p>Il faut utiliser le module <code>limit</code>:</p> <pre><code>iptables -I INPUT -p icmp -m limit --limit 10/s -J ACCEPT\n</code></pre>"},{"location":"uni/reseau/#suivi-de-connexion-conntrack","title":"Suivi de connexion (conntrack)","text":"<p>Cette section n'a pas \u00e9t\u00e9 v\u00e9rifi\u00e9e.</p> <pre><code>iptables -F\nmodeprobe ip_conntrack_ftp\niptables -A INPUT -J DROP\nftp\npassive\nopen 192.198.n.n\nexit\niptables -I INPUT -p tcp --sport 21 -m state --state ESTABLISHED -J ACCEPT\nftp\npassive\nopen 192.198.n.n\nn\nn\nls\n</code></pre>"},{"location":"uni/reseau/#td5","title":"TD5","text":"<p>??abstract \"<code>repeteur.c</code>\"     <pre><code>/*\n* Fichier 'repeteur.c' utilise pour le TD 5 de programmation IP.\n* Le programme 'repeteur' est un programme demon \"repetant\" tout\n* ce qu'on lui dit.  Il tourne sur le port 6666 et reste \ufffd l'ecoute\n* d'une eventuelle connexion.\n*\n* Historique\n*    1999/10/15 : dntt : creation\n*/\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;syslog.h&gt;\n#include &lt;signal.h&gt;\n#define MAXLEN  1024\n#define PORT_REPETEUR 6666\n#define NB_CONN_MAX 5\nvoid demon () ;\nvoid repeter (int socket_cliente) ;\nint lecture_socket (int socket_cliente, char *buf) ;\n/************************************************************************\n*\n* Fonction principale :\n* On cree le demon en dupliquant le processus afin de detacher le\n* programme du processus pere\n*\n************************************************************************/\nint main ()\n{\nswitch (fork ())\n{\ncase -1 :\nperror (\"*** erreur : fork impossible : demon non cree\") ;\nexit (1) ;\ncase 0 :\n/*\n        * Ce processus fils est celui qui deviendra le demon.\n        * Ingredients pour en faire un vrai et bon demons :\n        */\n/* 1 - On cree une nouvelle session. Pas de terminal de controle */\nsetsid () ;\n/* 2 - le repertoire courant est change a la racine afin de ne pas\n        *     causer de probleme lors de demontage eventuel de partition\n        */\nchdir (\"/\") ;\n/* 3 - Le masque sur les droits lors de creation de fichiers */\numask (0) ;\n/* 4 - Comme c'est un demon qui est lance et qui est \"detache\" du\n        *     term, l'entree, la sortie et l'erreur standard n'ont pas de\n        *     terminal ou s'afficher. On peut donc les fermer.\n        */\nclose (0) ;\nclose (1) ;\nclose (2) ;\n/* 6 - On lance le demon proprement dit */\ndemon () ;\n/* 7 - Si le demon s'arrete, alors on sort du processus fils. Le\n        *     programme est alors termine. */\nexit (1) ;\ndefault :\n/* Le processus pere est tue. On rend la main au shell appelant. */\nexit (0) ;\n}\nreturn 0 ;\n}\n/************************************************************************\n*\n* Le programme 'demon'\n*\n* Structure\n*           sockaddr_in : /usr/include/netinet/in.h\n*\n*\n*\n************************************************************************/\nvoid demon ()\n{\nint socket_ecoute ;\nint socket_cliente ;\nint valeur_retour ;\nint salong ;\nint opt = 1 ;\nstruct sockaddr_in monadr, sonadr ;\nint status ;\n/*\n    * Creation de la socket d'ecoute\n    */\nsocket_ecoute = socket (PF_INET, SOCK_STREAM, 0) ;\n/*\n    * Modification des options associees a la socket d'ecoute.\n    */\nsetsockopt (socket_ecoute, SOL_SOCKET, SO_REUSEADDR, (char *) &amp;opt, \\\n        sizeof (opt)) ;\n/*\n    * Initialisation des parametres internet de la socket d'ecoute.\n    */\nbzero ((char *) &amp;monadr, sizeof monadr) ;\nmonadr.sin_family = AF_INET ;\nmonadr.sin_port = htons (PORT_REPETEUR) ;\nmonadr.sin_addr.s_addr = INADDR_ANY ;\nvaleur_retour = bind (socket_ecoute, (struct sockaddr *) &amp;monadr, \\\n            (int) sizeof monadr) ;\n/*\n    * Socket mise en position d'ecoute ('listen'). On specifie aussi le\n    * nombre de connexions simultanees acceptees.\n    */\nvaleur_retour = listen (socket_ecoute, NB_CONN_MAX) ;\n/**\n    * Le demon tourne indefiniment a l'ecoute d'eventuelles connections\n    * 'accept'\n    * Lorsqu'un client se connecte, une socket est cree (socket_cliente).\n    * on duplique le processus et le processus fils prend en charge\n    * cette socket par la fonction 'repeter'.\n    */\nwhile (1)\n{\nsalong = sizeof sonadr ;\nsocket_cliente = accept (socket_ecoute, (struct sockaddr *) &amp;sonadr, \\\n                                (socklen_t *) &amp;salong) ;\nswitch (fork ())\n{\ncase -1 :\nbreak ;\ncase 0 :\nrepeter (socket_cliente) ;\nclose (socket_cliente) ;\nkill (getpid(),SIGTERM);\ndefault :\nwaitpid (-1, &amp;status, WNOHANG);\nclose (socket_cliente) ;\n}\n}\n}\n/************************************************************************\n*\n* La fonction qui repete\n*\n*\n*\n************************************************************************/\nvoid repeter (int socket_cliente)\n{\nint nb_lu ;\nchar buf [MAXLEN] ;\nwhile ((nb_lu = lecture_socket (socket_cliente, buf)) &gt; 0)\n{\n/* Si probleme de lecture sur la socket (fermee brutalement\n    * par exemple) */\nif (nb_lu == -1 || nb_lu == 0)\n{\nreturn ;\n}\n/* On repete ce qui a ete dit et on renvoie au client */\nwrite (socket_cliente, buf, nb_lu) ;\n}\n}\nint lecture_socket (int socket_cliente, char *buf)\n{\nint nb_lu  ;\nnb_lu = read (socket_cliente, buf, MAXLEN)  ;\nreturn (nb_lu) ;\n}\n</code></pre></p> <code>makefile</code> <pre><code>#\n# Makefile pour 'repeter.c'\n#\n# 1999/10/15 : dntt : creation\n#\nall : repeteur\nCC = gcc\nOPT = -O -Wall -pedantic -g -DCORRECTION\n\n.SUFFIXES: .o .c\n.c.o :\n${CC} -c ${OPT} $*.c\n\nOBJ = repeteur.c \\\nrepeteur : repeteur.o\n${CC} ${OPT}  repeteur.o -o repeteur\n</code></pre>"},{"location":"uni/reseau/#exercice-1_1","title":"Exercice 1","text":"<pre><code>./repeteur\ntelnet\nopen\nlocalhost 6666\nSalut mdrrrrrrrrr\n</code></pre>"},{"location":"uni/reseau/#exercice-2_4","title":"Exercice 2","text":""},{"location":"uni/securite/","title":"S\u00e9curit\u00e9 des r\u00e9seaux","text":""},{"location":"uni/securite/#td0","title":"TD0","text":""},{"location":"uni/securite/#exercice-0","title":"Exercice 0","text":"<p>Il parrait que c'est juste <code>buffer overflow</code></p>"},{"location":"uni/securite/#exercice-1","title":"Exercice 1","text":"<pre><code>                                       &lt;- A&gt;B 201(15) ack 701 \"Echo HACKED\"\n&lt;- B&gt;A 701(15) ack 216 \"Echo HACKED\"\n-&gt; A&gt;B 201 ack 715\n&lt;- B&gt;A 716 ack 216\n</code></pre>"},{"location":"uni/securite/#exercice-2","title":"Exercice 2","text":"<ol> <li>A enverait un ack a B, qui va imm\u00e9ditement demander un reste de la discussion. </li> <li>Si on ne d\u00e9termine pas le SN initial, on ne pourra pas envoyer de messages avc le bon SN et A demandera un reset. </li> <li>C'est principalement utilis\u00e9 pour aqu\u00e9rir des iformations sensibles. </li> </ol>"},{"location":"uni/securite/#exercice-3","title":"Exercice 3","text":"<ol> <li>Si j'ai bien compris, le pirate va demander des MAJ DNS \u00e0 plein de serveurs en se faisant passer par A. Donc A se prendra plein de r\u00e9ponses longues et sera submerg\u00e9.</li> <li>La bande passante prise pa l'attaque sera au maximum de (256/27)^745kb/s.</li> </ol>"},{"location":"uni/securite/#exercice-4","title":"Exercice 4","text":"<ol> <li>Dans la phase 1, Mallory DOS Alice.</li> <li>Dans la phase 2, kevin bruteforce le SN entre Alice et Bob.</li> <li>Dans la phase 3, kevin spoof Alice aupr\u00e8s de Bob.</li> </ol> <p>Mais Bob na jamais ack donc on a aucune id\u00e9e de si ca a march\u00e9?!</p> <p>La prof dit que vu que la discussion \u00e9tait courte, le fait qu'il envoie toujours le m\u00eame ack est pas grave?!</p>"},{"location":"uni/securite/#exercice-5","title":"Exercice 5","text":"<ol> <li>On fait des requ\u00eates DHCP avec une nouvelle mac a chaque fois et on sature la plage DHCP. Comme ca, les vrais clients n'auont pas d'IP attribu\u00e9e.</li> <li>En spoofan la passerelle.</li> </ol>"},{"location":"uni/securite/#td2","title":"TD2","text":""},{"location":"uni/securite/#exercice-1_1","title":"Exercice 1","text":"<ul> <li>1</li> <li>D'apr\u00e8s Chris: <code>H</code> revient deux fois donc c'est ue lettre fr\u00e9quente, comme E. On fait donc le masque suivant: <pre><code>ABCDEFGHIJKLMNOPQRSTUVWXYZ\nXYZABCDEFGHIJKLMNOPQRSTUVWXYZ\n</code></pre></li> </ul> <p>Et par chance c'est le bon masque, on obtient:</p> <pre><code>SECRET\n</code></pre> <ul> <li>2 Chaque lettre correspond \u00e0 une autre lettre de l'alphabet puisqu'on utilise le modulo 26.</li> <li>3 c</li> </ul>"},{"location":"uni/securite/#exercice-4_1","title":"Exercice 4","text":"<ul> <li>1 - On utilise Euclide \u00e9tendu. pgcd(89,phi) = 1 pgcd(89,phi) = u89 + vphi 197 = </li> </ul>"}]}